# Switchboard Plus v2.1 - ì „ì› ê´€ë¦¬ í™•ì¥

## ğŸ“‹ 1. ë¬¸ì„œ ê°œìš”

**í”„ë¡œì íŠ¸**: Switchboard Plus v2.1 (ì „ì› ê´€ë¦¬)  
**ì „ì œ ì¡°ê±´**: v2.0 ì™„ì„± ë° ì•ˆì • ìš´ì˜ í™•ì¸  
**ê°œë°œ ê¸°ê°„**: 4ì£¼  
**í•µì‹¬ ê¸°ëŠ¥**: ë””ìŠ¤í”Œë ˆì´ PC ì „ì› ê´€ë¦¬ í†µí•©

> ğŸ¯ **v2.1 ëª©í‘œ**: nDisplay í™˜ê²½ì˜ ì™„ì „í•œ ì „ì› ê´€ë¦¬ ì‹œìŠ¤í…œ
> âš¡ **í•µì‹¬ ê°€ì¹˜**: ì¶œê·¼ í•œ ë²ˆì˜ í´ë¦­ìœ¼ë¡œ ëª¨ë“  ì‹œìŠ¤í…œ ê°€ë™

---

## ğŸ”Œ 2. ì „ì› ê´€ë¦¬ ì‹œìŠ¤í…œ ê°œìš”

### 2.1 ì§€ì› ê¸°ëŠ¥

```
ğŸ”Œ ì „ì› ì¼œê¸° (Wake-on-LAN)
â”œâ”€â”€ ê°œë³„ í´ë¼ì´ì–¸íŠ¸ ì›ê²© ë¶€íŒ…
â”œâ”€â”€ ê·¸ë£¹ë³„ ì¼ê´„ ë¶€íŒ…  
â”œâ”€â”€ ìˆœì°¨ ë¶€íŒ… (ì „ë ¥ ë¶€í•˜ ë¶„ì‚°)
â””â”€â”€ ë¶€íŒ… ìƒíƒœ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§

ğŸ”„ ì¬ë¶€íŒ… (ì›ê²© ëª…ë ¹)
â”œâ”€â”€ ì†Œí”„íŠ¸ì›¨ì–´ ì¬ë¶€íŒ…
â”œâ”€â”€ ê°•ì œ ì¬ë¶€íŒ… (ì‘ë‹µ ì—†ì„ ë•Œ)
â”œâ”€â”€ ì•ˆì „ ì¬ë¶€íŒ… (í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ í›„)
â””â”€â”€ ì¬ë¶€íŒ… í›„ ìë™ ë³µêµ¬

âš¡ ì „ì› ë„ê¸° (ì›ê²© ì¢…ë£Œ)
â”œâ”€â”€ ì •ìƒ ì¢…ë£Œ (ì–¸ë¦¬ì–¼ì—”ì§„ ì¢…ë£Œ í›„)
â”œâ”€â”€ ê°•ì œ ì¢…ë£Œ (ë¹„ìƒì‹œ)
â”œâ”€â”€ ìŠ¤ì¼€ì¤„ ì¢…ë£Œ (ì‹œê°„ ì˜ˆì•½)
â””â”€â”€ ì ˆì „ ëª¨ë“œ ì§„ì…
```

### 2.2 ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
ğŸ–¥ï¸ Switchboard Plus Server v2.1
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… v2.0 ê¸°ë³¸ ê¸°ëŠ¥ (ëª¨ë“  ê¸°ëŠ¥)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ†• Wake-on-LAN ì„œë¹„ìŠ¤               â”‚
â”‚ ğŸ†• ì „ì› ìƒíƒœ ëª¨ë‹ˆí„°ë§               â”‚
â”‚ ğŸ†• ìŠ¤ì¼€ì¤„ë§ ì—”ì§„                    â”‚
â”‚ ğŸ†• ì „ë ¥ ì‚¬ìš©ëŸ‰ ì¶”ì                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“ WOL + SSH/WMI
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Display PCë“¤ (NëŒ€)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… v2.0 Python í´ë¼ì´ì–¸íŠ¸           â”‚
â”‚ ğŸ†• ì „ì› ê´€ë¦¬ ì—ì´ì „íŠ¸               â”‚
â”‚ ğŸ†• MAC ì£¼ì†Œ ë“±ë¡                    â”‚
â”‚ ğŸ†• ì „ë ¥ ìƒíƒœ ì„¼ì„œ                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ 3. ê°œë°œ ë¡œë“œë§µ (4ì£¼)

### Week 1: Wake-on-LAN êµ¬í˜„ ğŸ”Œ
```
ëª©í‘œ: ì›ê²© ë¶€íŒ… ê¸°ëŠ¥ ì™„ì„±
í•µì‹¬: MAC ì£¼ì†Œ ê¸°ë°˜ WOL íŒ¨í‚· ì „ì†¡
```

**ì£¼ìš” ì‘ì—…:**
- MAC ì£¼ì†Œ ìˆ˜ì§‘ ë° ë“±ë¡ ì‹œìŠ¤í…œ
- WOL íŒ¨í‚· ì „ì†¡ ë¼ì´ë¸ŒëŸ¬ë¦¬ êµ¬í˜„
- ë¶€íŒ… ìƒíƒœ í™•ì¸ (ping + í´ë¼ì´ì–¸íŠ¸ ì—°ê²°)
- ì›¹ UIì— ì „ì› ì¼œê¸° ë²„íŠ¼ ì¶”ê°€

### Week 2: ì›ê²© ì œì–´ êµ¬í˜„ ğŸ”„
```
ëª©í‘œ: ì¬ë¶€íŒ…/ì¢…ë£Œ ê¸°ëŠ¥ ì™„ì„±  
í•µì‹¬: ì•ˆì „í•œ ì›ê²© ì œì–´ ëª…ë ¹ ì‹œìŠ¤í…œ
```

**ì£¼ìš” ì‘ì—…:**
- Python í´ë¼ì´ì–¸íŠ¸ì— ì „ì› ê´€ë¦¬ ëª¨ë“ˆ ì¶”ê°€
- ì¬ë¶€íŒ…/ì¢…ë£Œ ëª…ë ¹ ì²˜ë¦¬
- í”„ë¡œì„¸ìŠ¤ ì•ˆì „ ì¢…ë£Œ ë¡œì§
- ê°•ì œ ì œì–´ ì˜µì…˜ (ë¹„ìƒì‹œ)

### Week 3: ìŠ¤ì¼€ì¤„ë§ ë° ìë™í™” â°
```
ëª©í‘œ: ìë™ ì „ì› ê´€ë¦¬ ì‹œìŠ¤í…œ
í•µì‹¬: ì‹œê°„ ê¸°ë°˜ ìë™ ì œì–´
```

**ì£¼ìš” ì‘ì—…:**
- ìŠ¤ì¼€ì¤„ ì„¤ì • UI êµ¬í˜„
- í¬ë¡  ê¸°ë°˜ ìŠ¤ì¼€ì¤„ë§ ì—”ì§„
- ì¶œê·¼/í‡´ê·¼ ì‹œê°„ ìë™ ì œì–´
- ì ˆì „ ì •ì±… ì„¤ì •

### Week 4: ê³ ê¸‰ ê¸°ëŠ¥ ë° ìµœì í™” âš™ï¸
```
ëª©í‘œ: ì „ë ¥ ê´€ë¦¬ ìµœì í™”
í•µì‹¬: íš¨ìœ¨ì ì¸ ì „ë ¥ ì‚¬ìš©
```

**ì£¼ìš” ì‘ì—…:**
- ì „ë ¥ ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§
- ìˆœì°¨ ë¶€íŒ… (ì „ë ¥ ë¶€í•˜ ë¶„ì‚°)
- ì „ì› ìƒíƒœ ëŒ€ì‹œë³´ë“œ
- ì—ë„ˆì§€ ì ˆì•½ ë¦¬í¬íŠ¸

---

## ğŸ”§ 4. ê¸°ìˆ  êµ¬í˜„ ìƒì„¸

### 4.1 Wake-on-LAN êµ¬í˜„

#### ì„œë²„ ì‚¬ì´ë“œ (Node.js)
```javascript
// services/wakeonlan.js
const dgram = require('dgram');

class WakeOnLAN {
    constructor() {
        this.socket = dgram.createSocket('udp4');
    }
    
    async wake(macAddress, broadcastIP = '255.255.255.255') {
        const magicPacket = this.createMagicPacket(macAddress);
        
        return new Promise((resolve, reject) => {
            this.socket.send(magicPacket, 9, broadcastIP, (err) => {
                if (err) reject(err);
                else resolve();
            });
        });
    }
    
    createMagicPacket(macAddress) {
        const mac = macAddress.replace(/[:-]/g, '');
        const macBuffer = Buffer.from(mac, 'hex');
        
        // Magic Packet: 6 * 0xFF + 16 * MAC
        const magicPacket = Buffer.alloc(102);
        
        // 6 bytes of 0xFF
        for (let i = 0; i < 6; i++) {
            magicPacket[i] = 0xFF;
        }
        
        // 16 repetitions of MAC address
        for (let i = 0; i < 16; i++) {
            macBuffer.copy(magicPacket, 6 + i * 6);
        }
        
        return magicPacket;
    }
    
    async checkBootStatus(ipAddress, timeout = 60000) {
        const startTime = Date.now();
        
        while (Date.now() - startTime < timeout) {
            try {
                const response = await ping(ipAddress);
                if (response) {
                    return await this.waitForClientConnection(ipAddress);
                }
            } catch (error) {
                // Continue checking
            }
            
            await this.sleep(5000); // 5ì´ˆë§ˆë‹¤ ì²´í¬
        }
        
        return false;
    }
}
```

#### MAC ì£¼ì†Œ ìë™ ìˆ˜ì§‘
```javascript
// routes/clients.js - MAC ì£¼ì†Œ ë“±ë¡ API
router.post('/:id/mac', async (req, res) => {
    try {
        const client = await Client.findByPk(req.params.id);
        if (!client) {
            return res.status(404).json({ error: 'Client not found' });
        }
        
        const { mac_address } = req.body;
        
        // MAC ì£¼ì†Œ í˜•ì‹ ê²€ì¦
        const macRegex = /^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$/;
        if (!macRegex.test(mac_address)) {
            return res.status(400).json({ error: 'Invalid MAC address format' });
        }
        
        await client.update({ mac_address });
        
        res.json({
            success: true,
            message: 'MAC address registered',
            client: client
        });
        
    } catch (error) {
        res.status(500).json({ error: error.message });
    }
});
```

### 4.2 Python í´ë¼ì´ì–¸íŠ¸ ì „ì› ê´€ë¦¬

```python
# power_manager.py - ì „ì› ê´€ë¦¬ ëª¨ë“ˆ
import os
import sys
import time
import psutil
import subprocess
from typing import Dict, Any

class PowerManager:
    def __init__(self):
        self.platform = sys.platform
        
    def get_mac_address(self) -> str:
        """ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ì˜ MAC ì£¼ì†Œ ë°˜í™˜"""
        import uuid
        mac = ':'.join(['{:02x}'.format((uuid.getnode() >> elements) & 0xff) 
                       for elements in range(0,2*6,2)][::-1])
        return mac
        
    def shutdown(self, force: bool = False) -> Dict[str, Any]:
        """ì‹œìŠ¤í…œ ì¢…ë£Œ"""
        try:
            if self.platform == "win32":
                cmd = "shutdown /s /t 30" if not force else "shutdown /s /f /t 0"
            else:
                cmd = "sudo shutdown -h +1" if not force else "sudo shutdown -h now"
                
            subprocess.run(cmd, shell=True, check=True)
            
            return {
                "success": True,
                "action": "shutdown",
                "force": force,
                "message": f"Shutdown command sent ({'forced' if force else 'graceful'})"
            }
            
        except subprocess.CalledProcessError as e:
            return {
                "success": False,
                "error": f"Shutdown failed: {e}",
                "action": "shutdown"
            }
    
    def reboot(self, force: bool = False) -> Dict[str, Any]:
        """ì‹œìŠ¤í…œ ì¬ë¶€íŒ…"""
        try:
            if self.platform == "win32":
                cmd = "shutdown /r /t 30" if not force else "shutdown /r /f /t 0"
            else:
                cmd = "sudo reboot" if force else "sudo shutdown -r +1"
                
            subprocess.run(cmd, shell=True, check=True)
            
            return {
                "success": True,
                "action": "reboot",
                "force": force,
                "message": f"Reboot command sent ({'forced' if force else 'graceful'})"
            }
            
        except subprocess.CalledProcessError as e:
            return {
                "success": False,
                "error": f"Reboot failed: {e}",
                "action": "reboot"
            }
    
    def get_power_status(self) -> Dict[str, Any]:
        """ì „ì› ìƒíƒœ ì •ë³´ ìˆ˜ì§‘"""
        try:
            battery = psutil.sensors_battery()
            
            return {
                "timestamp": time.time(),
                "uptime": time.time() - psutil.boot_time(),
                "cpu_usage": psutil.cpu_percent(interval=1),
                "memory_usage": psutil.virtual_memory().percent,
                "disk_usage": psutil.disk_usage('/').percent,
                "temperature": self.get_cpu_temperature(),
                "power_source": "battery" if battery else "ac",
                "battery_percent": battery.percent if battery else None,
                "network_interfaces": self.get_network_status()
            }
            
        except Exception as e:
            return {
                "error": f"Failed to get power status: {e}",
                "timestamp": time.time()
            }
    
    def get_cpu_temperature(self) -> float:
        """CPU ì˜¨ë„ ì¸¡ì • (ê°€ëŠ¥í•œ ê²½ìš°)"""
        try:
            if self.platform == "win32":
                # Windowsì—ì„œëŠ” WMI ì‚¬ìš©
                import wmi
                w = wmi.WMI(namespace=r"root\OpenHardwareMonitor")
                temperature_infos = w.Sensor()
                for sensor in temperature_infos:
                    if sensor.SensorType == u'Temperature' and 'CPU' in sensor.Name:
                        return float(sensor.Value)
            else:
                # Linuxì—ì„œëŠ” sensors ëª…ë ¹ ì‚¬ìš©
                temps = psutil.sensors_temperatures()
                if 'coretemp' in temps:
                    return temps['coretemp'][0].current
                    
        except Exception:
            pass
            
        return 0.0
    
    def get_network_status(self) -> Dict[str, str]:
        """ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ ìƒíƒœ"""
        interfaces = {}
        for interface, addrs in psutil.net_if_addrs().items():
            for addr in addrs:
                if addr.family == 2:  # IPv4
                    interfaces[interface] = addr.address
                    break
        return interfaces

# main.pyì— í†µí•©
class SwitchboardClient:
    def __init__(self):
        # ê¸°ì¡´ ì´ˆê¸°í™”...
        self.power_manager = PowerManager()
        
    def register_with_server(self):
        """ì„œë²„ì— MAC ì£¼ì†Œì™€ í•¨ê»˜ ë“±ë¡"""
        try:
            # ê¸°ë³¸ ë“±ë¡
            response = requests.post(f"{self.server_url}/api/clients", json={
                "name": self.config["client_name"],
                "ip_address": self.get_local_ip(),
                "port": self.config.get("port", 8081),
                "description": self.config.get("description", "")
            })
            
            if response.status_code in [200, 201]:
                client_id = response.json()['id']
                
                # MAC ì£¼ì†Œ ë“±ë¡
                mac_address = self.power_manager.get_mac_address()
                mac_response = requests.post(
                    f"{self.server_url}/api/clients/{client_id}/mac",
                    json={"mac_address": mac_address}
                )
                
                if mac_response.status_code == 200:
                    print(f"âœ… MAC ì£¼ì†Œ ë“±ë¡ ì™„ë£Œ: {mac_address}")
                
                return True
                
        except Exception as e:
            print(f"âŒ ì„œë²„ ë“±ë¡ ì‹¤íŒ¨: {e}")
            return False
    
    def handle_power_command(self, data):
        """ì „ì› ê´€ë¦¬ ëª…ë ¹ ì²˜ë¦¬"""
        action = data.get('action')
        force = data.get('force', False)
        
        if action == 'shutdown':
            result = self.power_manager.shutdown(force)
        elif action == 'reboot':
            result = self.power_manager.reboot(force)
        elif action == 'status':
            result = self.power_manager.get_power_status()
        else:
            result = {
                "success": False,
                "error": f"Unknown power action: {action}"
            }
        
        # ê²°ê³¼ë¥¼ ì„œë²„ì— ë³´ê³ 
        self.sio.emit('power_command_result', {
            "execution_id": data.get('execution_id'),
            "client_name": self.config["client_name"],
            "action": action,
            "result": result
        })
```

### 4.3 ì›¹ UI ì „ì› ê´€ë¦¬ ì¸í„°í˜ì´ìŠ¤

#### ê°œë³„ í´ë¼ì´ì–¸íŠ¸ ì „ì› ì œì–´
```javascript
// í´ë¼ì´ì–¸íŠ¸ ëª¨ë‹¬ì— ì „ì› ì œì–´ ë²„íŠ¼ ì¶”ê°€
function createPowerControlSection() {
    return `
        <div class="info-section">
            <h4>ì „ì› ì œì–´</h4>
            <div class="power-controls">
                <div class="power-row">
                    <button class="btn-power btn-power-on" onclick="powerAction('wake')" 
                            title="Wake-on-LANìœ¼ë¡œ ì›ê²© ë¶€íŒ…">
                        ğŸ”Œ ì „ì› ì¼œê¸°
                    </button>
                    <div class="power-status" id="powerStatus">
                        <span class="status-indicator offline"></span>
                        ì „ì› êº¼ì§
                    </div>
                </div>
                
                <div class="power-row">
                    <button class="btn-power btn-power-reboot" onclick="powerAction('reboot')" 
                            title="ì•ˆì „í•œ ì¬ë¶€íŒ…">
                        ğŸ”„ ì¬ë¶€íŒ…
                    </button>
                    <button class="btn-power btn-power-reboot-force" onclick="powerAction('reboot', true)" 
                            title="ê°•ì œ ì¬ë¶€íŒ…">
                        âš¡ ê°•ì œ ì¬ë¶€íŒ…
                    </button>
                </div>
                
                <div class="power-row">
                    <button class="btn-power btn-power-shutdown" onclick="powerAction('shutdown')" 
                            title="ì•ˆì „í•œ ì¢…ë£Œ">
                        â¸ï¸ ì¢…ë£Œ
                    </button>
                    <button class="btn-power btn-power-shutdown-force" onclick="powerAction('shutdown', true)" 
                            title="ê°•ì œ ì¢…ë£Œ">
                        ğŸ›‘ ê°•ì œ ì¢…ë£Œ
                    </button>
                </div>
            </div>
            
            <div class="power-info">
                <div class="power-metric">
                    <span>ê°€ë™ ì‹œê°„:</span>
                    <span id="uptime">-</span>
                </div>
                <div class="power-metric">
                    <span>CPU ì˜¨ë„:</span>
                    <span id="temperature">-</span>
                </div>
                <div class="power-metric">
                    <span>ì „ë ¥ ìƒíƒœ:</span>
                    <span id="powerSource">-</span>
                </div>
            </div>
        </div>
    `;
}

async function powerAction(action, force = false) {
    const client = clients.get(currentClientId);
    if (!client) return;
    
    const confirmMessage = {
        'wake': `"${client.name}"ì˜ ì „ì›ì„ ì¼œì‹œê² ìŠµë‹ˆê¹Œ?`,
        'reboot': `"${client.name}"ì„(ë¥¼) ${force ? 'ê°•ì œë¡œ ' : ''}ì¬ë¶€íŒ…í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`,
        'shutdown': `"${client.name}"ì„(ë¥¼) ${force ? 'ê°•ì œë¡œ ' : ''}ì¢…ë£Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`
    };
    
    if (confirm(confirmMessage[action])) {
        try {
            showToast(`ì „ì› ${action} ëª…ë ¹ì„ ì „ì†¡í•˜ê³  ìˆìŠµë‹ˆë‹¤...`, 'info');
            
            const response = await fetch(`/api/clients/${currentClientId}/power`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ action, force })
            });
            
            const result = await response.json();
            
            if (result.success) {
                showToast(`ì „ì› ${action} ëª…ë ¹ì´ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.`, 'success');
                
                if (action === 'wake') {
                    // ë¶€íŒ… ìƒíƒœ ëª¨ë‹ˆí„°ë§ ì‹œì‘
                    startBootMonitoring(currentClientId);
                }
            } else {
                showToast(`ì „ì› ${action} ì‹¤íŒ¨: ${result.error}`, 'error');
            }
            
        } catch (error) {
            showToast(`ì „ì› ì œì–´ ì˜¤ë¥˜: ${error.message}`, 'error');
        }
    }
}

function startBootMonitoring(clientId) {
    const client = clients.get(clientId);
    const statusElement = document.getElementById('powerStatus');
    
    if (statusElement) {
        statusElement.innerHTML = `
            <span class="status-indicator booting"></span>
            ë¶€íŒ… ì¤‘... <div class="spinner"></div>
        `;
    }
    
    // Socketìœ¼ë¡œ ë¶€íŒ… ìƒíƒœ ëª¨ë‹ˆí„°ë§
    socket.emit('monitor_boot_status', { clientId });
}
```

#### ì¼ê´„ ì „ì› ì œì–´
```javascript
// ê·¸ë£¹ ì„ íƒ í›„ ì¼ê´„ ì „ì› ì œì–´
function bulkPowerAction(action, force = false) {
    if (selectedGroups.size === 0) {
        showToast('ì„ íƒëœ ê·¸ë£¹ì´ ì—†ìŠµë‹ˆë‹¤.', 'error');
        return;
    }
    
    const actionNames = {
        'wake': 'ì¼œê¸°',
        'reboot': 'ì¬ë¶€íŒ…',
        'shutdown': 'ë„ê¸°'
    };
    
    const totalClients = getTotalClientsInSelectedGroups();
    const actionName = actionNames[action];
    const forceText = force ? ' (ê°•ì œ)' : '';
    
    if (confirm(`ì„ íƒëœ ê·¸ë£¹ì˜ ${totalClients}ëŒ€ í´ë¼ì´ì–¸íŠ¸ë¥¼ ëª¨ë‘ ${actionName}${forceText} í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
        
        showToast(`ì¼ê´„ ì „ì› ${actionName} ì‘ì—…ì„ ì‹œì‘í•©ë‹ˆë‹¤...`, 'info');
        
        // ì„œë²„ì— ì¼ê´„ ì „ì› ì œì–´ ìš”ì²­
        socket.emit('bulk_power_action', {
            action: action,
            force: force,
            group_ids: Array.from(selectedGroups),
            sequential: action === 'wake' // ë¶€íŒ…ì€ ìˆœì°¨ì ìœ¼ë¡œ
        });
    }
}

// ìˆœì°¨ ë¶€íŒ… ëª¨ë‹ˆí„°ë§
socket.on('sequential_boot_progress', (data) => {
    const { current, total, client_name, status } = data;
    
    showToast(`ìˆœì°¨ ë¶€íŒ… ì§„í–‰ì¤‘: ${current}/${total} - ${client_name} ${status}`, 'info');
    
    if (current === total) {
        showToast(`ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ ë¶€íŒ… ì™„ë£Œ! (${total}ëŒ€)`, 'success');
    }
});
```

### 4.4 ìŠ¤ì¼€ì¤„ë§ ì‹œìŠ¤í…œ

#### ìŠ¤ì¼€ì¤„ ì„¤ì • UI
```javascript
// ìŠ¤ì¼€ì¤„ ê´€ë¦¬ ëª¨ë‹¬
function showScheduleModal() {
    const modalHTML = `
        <div class="modal" id="scheduleModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>ì „ì› ìŠ¤ì¼€ì¤„ ì„¤ì •</h3>
                    <span class="close" onclick="closeScheduleModal()">&times;</span>
                </div>
                
                <div class="modal-body">
                    <div class="schedule-tabs">
                        <button class="tab-btn active" onclick="showScheduleTab('daily')">
                            ì¼ì¼ ìŠ¤ì¼€ì¤„
                        </button>
                        <button class="tab-btn" onclick="showScheduleTab('weekly')">
                            ì£¼ê°„ ìŠ¤ì¼€ì¤„
                        </button>
                        <button class="tab-btn" onclick="showScheduleTab('custom')">
                            ì‚¬ìš©ì ì •ì˜
                        </button>
                    </div>
                    
                    <div class="schedule-content" id="dailySchedule">
                        <h4>í‰ì¼ ìë™ ì œì–´</h4>
                        <div class="schedule-row">
                            <label>ì¶œê·¼ ì‹œê°„ (ìë™ ì¼œê¸°):</label>
                            <input type="time" id="workStartTime" value="08:30">
                            <input type="checkbox" id="enableWorkStart" checked>
                        </div>
                        
                        <div class="schedule-row">
                            <label>í‡´ê·¼ ì‹œê°„ (ìë™ ë„ê¸°):</label>
                            <input type="time" id="workEndTime" value="18:00">
                            <input type="checkbox" id="enableWorkEnd" checked>
                        </div>
                        
                        <div class="schedule-row">
                            <label>ëŒ€ìƒ ê·¸ë£¹:</label>
                            <select id="scheduleTargetGroup" multiple>
                                <!-- ê·¸ë£¹ ëª©ë¡ ë™ì  ë¡œë“œ -->
                            </select>
                        </div>
                        
                        <div class="schedule-options">
                            <label>
                                <input type="checkbox" id="weekendSchedule">
                                ì£¼ë§ì—ë„ ì ìš©
                            </label>
                            <label>
                                <input type="checkbox" id="holidaySchedule">
                                ê³µíœ´ì¼ì—ë„ ì ìš©
                            </label>
                        </div>
                    </div>
                    
                    <div class="power-savings">
                        <h4>ì ˆì „ ì„¤ì •</h4>
                        <div class="savings-option">
                            <label>ìœ íœ´ ì‹œê°„ ìë™ ì ˆì „:</label>
                            <select id="idleTimeout">
                                <option value="0">ì‚¬ìš© ì•ˆí•¨</option>
                                <option value="30">30ë¶„</option>
                                <option value="60">1ì‹œê°„</option>
                                <option value="120">2ì‹œê°„</option>
                            </select>
                        </div>
                        
                        <div class="savings-option">
                            <label>ì ì‹¬ì‹œê°„ ì ˆì „:</label>
                            <input type="time" id="lunchStart" value="12:00">
                            <span>~</span>
                            <input type="time" id="lunchEnd" value="13:00">
                            <input type="checkbox" id="enableLunchPower">
                        </div>
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button class="btn btn-secondary" onclick="closeScheduleModal()">ì·¨ì†Œ</button>
                    <button class="btn btn-primary" onclick="saveSchedule()">ì €ì¥</button>
                </div>
            </div>
        </div>
    `;
    
    document.body.insertAdjacentHTML('beforeend', modalHTML);
    document.getElementById('scheduleModal').style.display = 'flex';
    loadScheduleData();
}

async function saveSchedule() {
    const scheduleData = {
        daily: {
            work_start: document.getElementById('workStartTime').value,
            work_end: document.getElementById('workEndTime').value,
            enable_start: document.getElementById('enableWorkStart').checked,
            enable_end: document.getElementById('enableWorkEnd').checked,
            target_groups: Array.from(document.getElementById('scheduleTargetGroup').selectedOptions)
                               .map(option => option.value),
            weekend: document.getElementById('weekendSchedule').checked,
            holiday: document.getElementById('holidaySchedule').checked
        },
        power_saving: {
            idle_timeout: parseInt(document.getElementById('idleTimeout').value),
            lunch_start: document.getElementById('lunchStart').value,
            lunch_end: document.getElementById('lunchEnd').value,
            enable_lunch: document.getElementById('enableLunchPower').checked
        }
    };
    
    try {
        const response = await fetch('/api/schedule/power', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(scheduleData)
        });
        
        if (response.ok) {
            showToast('ì „ì› ìŠ¤ì¼€ì¤„ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
            closeScheduleModal();
        } else {
            showToast('ìŠ¤ì¼€ì¤„ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', 'error');
        }
        
    } catch (error) {
        showToast(`ìŠ¤ì¼€ì¤„ ì €ì¥ ì˜¤ë¥˜: ${error.message}`, 'error');
    }
}
```

#### ì„œë²„ ì‚¬ì´ë“œ ìŠ¤ì¼€ì¤„ëŸ¬
```javascript
// services/scheduler.js
const cron = require('node-cron');

class PowerScheduler {
    constructor(wakeOnLAN, socketManager) {
        this.wol = wakeOnLAN;
        this.socketManager = socketManager;
        this.schedules = new Map();
    }
    
    async loadSchedules() {
        // ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ìŠ¤ì¼€ì¤„ ë¡œë“œ
        const schedules = await Schedule.findAll({ where: { active: true } });
        
        schedules.forEach(schedule => {
            this.registerSchedule(schedule);
        });
    }
    
    registerSchedule(schedule) {
        if (schedule.type === 'daily') {
            // ë§¤ì¼ ë°˜ë³µ ìŠ¤ì¼€ì¤„
            const cronExpression = this.buildCronExpression(schedule);
            
            const task = cron.schedule(cronExpression, async () => {
                await this.executeScheduledAction(schedule);
            }, {
                scheduled: true,
                timezone: "Asia/Seoul"
            });
            
            this.schedules.set(schedule.id, task);
        }
    }
    
    buildCronExpression(schedule) {
        const time = schedule.time.split(':');
        const hour = parseInt(time[0]);
        const minute = parseInt(time[1]);
        
        if (schedule.weekend_enabled) {
            // ë§¤ì¼
            return `${minute} ${hour} * * *`;
        } else {
            // í‰ì¼ë§Œ (ì›”-ê¸ˆ)
            return `${minute} ${hour} * * 1-5`;
        }
    }
    
    async executeScheduledAction(schedule) {
        console.log(`ğŸ•’ ìŠ¤ì¼€ì¤„ ì‹¤í–‰: ${schedule.name} (${schedule.action})`);
        
        try {
            const groups = await this.getScheduleGroups(schedule.id);
            const clients = await this.getClientsFromGroups(groups);
            
            if (schedule.action === 'wake') {
                await this.executeSequentialWake(clients);
            } else if (schedule.action === 'shutdown') {
                await this.executeBulkShutdown(clients);
            }
            
            // ì›¹ í´ë¼ì´ì–¸íŠ¸ì— ì•Œë¦¼
            this.socketManager.broadcast('schedule_executed', {
                schedule_name: schedule.name,
                action: schedule.action,
                client_count: clients.length,
                timestamp: new Date()
            });
            
        } catch (error) {
            console.error(`ìŠ¤ì¼€ì¤„ ì‹¤í–‰ ì‹¤íŒ¨: ${schedule.name}`, error);
        }
    }
    
    async executeSequentialWake(clients) {
        // ìˆœì°¨ì  ë¶€íŒ… (ì „ë ¥ ë¶€í•˜ ë¶„ì‚°)
        for (let i = 0; i < clients.length; i++) {
            const client = clients[i];
            
            try {
                await this.wol.wake(client.mac_address);
                console.log(`ğŸ”Œ ë¶€íŒ… ì‹œì‘: ${client.name}`);
                
                // ê° í´ë¼ì´ì–¸íŠ¸ ê°„ 30ì´ˆ ê°„ê²©
                if (i < clients.length - 1) {
                    await this.sleep(30000);
                }
                
            } catch (error) {
                console.error(`ë¶€íŒ… ì‹¤íŒ¨: ${client.name}`, error);
            }
        }
    }
    
    async executeBulkShutdown(clients) {
        // ë™ì‹œ ì¢…ë£Œ
        const shutdownPromises = clients.map(client => {
            return this.socketManager.sendToClient(client.name, 'power_command', {
                action: 'shutdown',
                force: false,
                delay: 300 // 5ë¶„ ì§€ì—°
            });
        });
        
        await Promise.allSettled(shutdownPromises);
    }
    
    sleep(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
    }
}
```

---

## ğŸ“Š 5. ì „ë ¥ ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ

### 5.1 ì‹¤ì‹œê°„ ì „ë ¥ ìƒíƒœ ëª¨ë‹ˆí„°ë§

```javascript
// ì „ë ¥ ëŒ€ì‹œë³´ë“œ ì»´í¬ë„ŒíŠ¸
function createPowerDashboard() {
    return `
        <div class="power-dashboard">
            <div class="dashboard-header">
                <h2>ì „ë ¥ ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ</h2>
                <div class="dashboard-controls">
                    <button class="btn btn-primary" onclick="showScheduleModal()">
                        â° ìŠ¤ì¼€ì¤„ ì„¤ì •
                    </button>
                    <button class="btn btn-secondary" onclick="exportPowerReport()">
                        ğŸ“Š ë¦¬í¬íŠ¸ ë‚´ë³´ë‚´ê¸°
                    </button>
                </div>
            </div>
            
            <div class="power-stats-grid">
                <div class="power-stat-card">
                    <div class="stat-icon">ğŸ”Œ</div>
                    <div class="stat-info">
                        <div class="stat-value" id="totalPowerOn">0</div>
                        <div class="stat-label">ì „ì› ì¼œì§</div>
                    </div>
                </div>
                
                <div class="power-stat-card">
                    <div class="stat-icon">âš¡</div>
                    <div class="stat-info">
                        <div class="stat-value" id="totalPowerOff">0</div>
                        <div class="stat-label">ì „ì› êº¼ì§</div>
                    </div>
                </div>
                
                <div class="power-stat-card">
                    <div class="stat-icon">ğŸ’°</div>
                    <div class="stat-info">
                        <div class="stat-value" id="estimatedSavings">0</div>
                        <div class="stat-label">ì˜ˆìƒ ì ˆì•½ (ì›/ì›”)</div>
                    </div>
                </div>
                
                <div class="power-stat-card">
                    <div class="stat-icon">ğŸŒ±</div>
                    <div class="stat-info">
                        <div class="stat-value" id="carbonReduction">0</div>
                        <div class="stat-label">COâ‚‚ ì ˆì•½ (kg/ì›”)</div>
                    </div>
                </div>
            </div>
            
            <div class="power-timeline">
                <h3>ì˜¤ëŠ˜ì˜ ì „ë ¥ ì‚¬ìš© íƒ€ì„ë¼ì¸</h3>
                <div class="timeline-container" id="powerTimeline">
                    <!-- íƒ€ì„ë¼ì¸ ì°¨íŠ¸ -->
                </div>
            </div>
            
            <div class="schedule-status">
                <h3>í™œì„± ìŠ¤ì¼€ì¤„</h3>
                <div class="schedule-list" id="activeSchedules">
                    <!-- í™œì„± ìŠ¤ì¼€ì¤„ ëª©ë¡ -->
                </div>
            </div>
        </div>
    `;
}

function updatePowerDashboard() {
    // ì‹¤ì‹œê°„ ì „ë ¥ í†µê³„ ì—…ë°ì´íŠ¸
    const powerOnCount = document.querySelectorAll('.client-item.online, .client-item.running').length;
    const powerOffCount = document.querySelectorAll('.client-item.offline').length;
    
    document.getElementById('totalPowerOn').textContent = powerOnCount;
    document.getElementById('totalPowerOff').textContent = powerOffCount;
    
    // ì˜ˆìƒ ì „ë ¥ ì ˆì•½ ê³„ì‚° (PCë‹¹ 300W ê°€ì •)
    const dailySavings = powerOffCount * 300 * 24 / 1000; // kWh
    const monthlySavings = dailySavings * 30 * 150; // ì› (kWhë‹¹ 150ì› ê°€ì •)
    document.getElementById('estimatedSavings').textContent = Math.round(monthlySavings).toLocaleString();
    
    // CO2 ì ˆì•½ëŸ‰ ê³„ì‚° (kWhë‹¹ 0.5kg CO2 ê°€ì •)
    const carbonReduction = dailySavings * 30 * 0.5;
    document.getElementById('carbonReduction').textContent = carbonReduction.toFixed(1);
}

// ì „ë ¥ ì‚¬ìš© íƒ€ì„ë¼ì¸ ì°¨íŠ¸
function createPowerTimeline() {
    const timelineData = generateTimelineData();
    
    const timeline = document.getElementById('powerTimeline');
    timeline.innerHTML = '';
    
    timelineData.forEach((data, hour) => {
        const timelineItem = document.createElement('div');
        timelineItem.className = 'timeline-item';
        timelineItem.innerHTML = `
            <div class="timeline-time">${hour}:00</div>
            <div class="timeline-bar">
                <div class="timeline-power-on" style="width: ${data.onPercentage}%"></div>
            </div>
            <div class="timeline-count">${data.onCount}/${data.total}</div>
        `;
        timeline.appendChild(timelineItem);
    });
}
```

---

## ğŸ”§ 6. ì„±ëŠ¥ ìµœì í™” ë° ì•ˆì •ì„±

### 6.1 ì „ë ¥ ë¶€í•˜ ë¶„ì‚°

```javascript
// ìˆœì°¨ ë¶€íŒ…ìœ¼ë¡œ ì „ë ¥ ë¶€í•˜ ë¶„ì‚°
class SequentialBootManager {
    constructor(wakeOnLAN, maxConcurrent = 3) {
        this.wol = wakeOnLAN;
        this.maxConcurrent = maxConcurrent;
        this.bootQueue = [];
        this.bootingClients = new Set();
    }
    
    async addToBootQueue(clients) {
        this.bootQueue.push(...clients);
        this.processBootQueue();
    }
    
    async processBootQueue() {
        while (this.bootQueue.length > 0 && this.bootingClients.size < this.maxConcurrent) {
            const client = this.bootQueue.shift();
            this.bootClient(client);
        }
    }
    
    async bootClient(client) {
        this.bootingClients.add(client.id);
        
        try {
            console.log(`ğŸ”Œ ë¶€íŒ… ì‹œì‘: ${client.name}`);
            
            await this.wol.wake(client.mac_address);
            
            // ë¶€íŒ… ì™„ë£Œ ëŒ€ê¸° (ìµœëŒ€ 5ë¶„)
            const bootSuccess = await this.waitForBoot(client, 300000);
            
            if (bootSuccess) {
                console.log(`âœ… ë¶€íŒ… ì™„ë£Œ: ${client.name}`);
            } else {
                console.log(`âš ï¸ ë¶€íŒ… íƒ€ì„ì•„ì›ƒ: ${client.name}`);
            }
            
        } catch (error) {
            console.error(`âŒ ë¶€íŒ… ì‹¤íŒ¨: ${client.name}`, error);
        } finally {
            this.bootingClients.delete(client.id);
            
            // 30ì´ˆ ëŒ€ê¸° í›„ ë‹¤ìŒ í´ë¼ì´ì–¸íŠ¸ ë¶€íŒ…
            setTimeout(() => {
                this.processBootQueue();
            }, 30000);
        }
    }
    
    async waitForBoot(client, timeout) {
        const startTime = Date.now();
        
        while (Date.now() - startTime < timeout) {
            // ping ì²´í¬
            const pingResult = await this.pingClient(client.ip_address);
            if (pingResult) {
                // í´ë¼ì´ì–¸íŠ¸ ì—°ê²° ëŒ€ê¸°
                const clientConnected = await this.waitForClientConnection(client, 60000);
                return clientConnected;
            }
            
            await this.sleep(10000); // 10ì´ˆë§ˆë‹¤ ì²´í¬
        }
        
        return false;
    }
}
```

### 6.2 ì•ˆì „í•œ ì¢…ë£Œ í”„ë¡œì„¸ìŠ¤

```python
# Python í´ë¼ì´ì–¸íŠ¸ì˜ ì•ˆì „í•œ ì¢…ë£Œ
class SafeShutdownManager:
    def __init__(self, switchboard_client):
        self.client = switchboard_client
        self.shutdown_timeout = 300  # 5ë¶„
        
    def initiate_safe_shutdown(self, force=False):
        """ì•ˆì „í•œ ì¢…ë£Œ í”„ë¡œì„¸ìŠ¤"""
        try:
            if not force:
                # 1. ì‹¤í–‰ ì¤‘ì¸ ì–¸ë¦¬ì–¼ì—”ì§„ í”„ë¡œì„¸ìŠ¤ ì •ë¦¬
                self.stop_unreal_processes()
                
                # 2. í´ë¼ì´ì–¸íŠ¸ ì—°ê²° ì •ë¦¬
                self.cleanup_connections()
                
                # 3. ì„ì‹œ íŒŒì¼ ì •ë¦¬
                self.cleanup_temp_files()
                
                # 4. ì„œë²„ì— ì¢…ë£Œ ì˜ˆì • ì•Œë¦¼
                self.notify_shutdown_intent()
                
                # 5. ì§€ì—° í›„ ì¢…ë£Œ
                time.sleep(30)
            
            # ì‹œìŠ¤í…œ ì¢…ë£Œ ì‹¤í–‰
            self.execute_shutdown(force)
            
        except Exception as e:
            print(f"ì•ˆì „í•œ ì¢…ë£Œ ì‹¤íŒ¨: {e}")
            # ë¹„ìƒì‹œ ê°•ì œ ì¢…ë£Œ
            self.execute_shutdown(True)
    
    def stop_unreal_processes(self):
        """ì–¸ë¦¬ì–¼ì—”ì§„ í”„ë¡œì„¸ìŠ¤ ì •ë¦¬"""
        unreal_processes = []
        
        for proc in psutil.process_iter(['pid', 'name']):
            try:
                if 'unreal' in proc.info['name'].lower():
                    unreal_processes.append(proc)
            except (psutil.NoSuchProcess, psutil.AccessDenied):
                continue
        
        # ì •ìƒ ì¢…ë£Œ ì‹œë„
        for proc in unreal_processes:
            try:
                proc.terminate()
                print(f"ì–¸ë¦¬ì–¼ì—”ì§„ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ ìš”ì²­: PID {proc.pid}")
            except psutil.NoSuchProcess:
                continue
        
        # 10ì´ˆ ëŒ€ê¸° í›„ ê°•ì œ ì¢…ë£Œ
        time.sleep(10)
        for proc in unreal_processes:
            try:
                if proc.is_running():
                    proc.kill()
                    print(f"ì–¸ë¦¬ì–¼ì—”ì§„ í”„ë¡œì„¸ìŠ¤ ê°•ì œ ì¢…ë£Œ: PID {proc.pid}")
            except psutil.NoSuchProcess:
                continue
    
    def cleanup_connections(self):
        """ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì •ë¦¬"""
        try:
            # Socket.io ì—°ê²° ì •ë¦¬
            if hasattr(self.client, 'sio') and self.client.sio.connected:
                self.client.sio.emit('client_shutdown_notice', {
                    'client_name': self.client.config['client_name'],
                    'reason': 'scheduled_shutdown'
                })
                self.client.sio.disconnect()
            
        except Exception as e:
            print(f"ì—°ê²° ì •ë¦¬ ì‹¤íŒ¨: {e}")
    
    def cleanup_temp_files(self):
        """ì„ì‹œ íŒŒì¼ ì •ë¦¬"""
        temp_dirs = [
            os.path.expanduser('~/AppData/Local/Temp'),
            'C:/Windows/Temp',
            './logs/temp'
        ]
        
        for temp_dir in temp_dirs:
            if os.path.exists(temp_dir):
                try:
                    # 1ì¼ ì´ìƒ ëœ ì„ì‹œ íŒŒì¼ ì‚­ì œ
                    cutoff_time = time.time() - 86400
                    for filename in os.listdir(temp_dir):
                        filepath = os.path.join(temp_dir, filename)
                        if os.path.getmtime(filepath) < cutoff_time:
                            os.remove(filepath)
                except Exception as e:
                    print(f"ì„ì‹œ íŒŒì¼ ì •ë¦¬ ì‹¤íŒ¨: {e}")
```

---

## ğŸ“± 7. ëª¨ë°”ì¼ ìµœì í™”

### 7.1 ëª¨ë°”ì¼ ì „ì› ì œì–´ ì¸í„°í˜ì´ìŠ¤

```css
/* ëª¨ë°”ì¼ ì „ì› ì œì–´ ìµœì í™” */
@media (max-width: 768px) {
    .power-controls {
        display: grid;
        grid-template-columns: 1fr;
        gap: 12px;
    }
    
    .power-row {
        display: flex;
        flex-direction: column;
        gap: 8px;
    }
    
    .btn-power {
        width: 100%;
        padding: 12px;
        font-size: 16px;
        min-height: 48px; /* í„°ì¹˜ ì¹œí™”ì  */
    }
    
    .power-dashboard {
        padding: 16px;
    }
    
    .power-stats-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
    }
    
    .power-stat-card {
        padding: 16px;
        text-align: center;
    }
}

/* í„°ì¹˜ ì œìŠ¤ì²˜ ì§€ì› */
.btn-power {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
}

.btn-power:active {
    transform: scale(0.98);
}
```

### 7.2 PWA (Progressive Web App) ì§€ì›

```javascript
// manifest.json
{
    "name": "Switchboard Plus v2.1",
    "short_name": "SBPlus",
    "description": "nDisplay ì „ì› ê´€ë¦¬ ì‹œìŠ¤í…œ",
    "start_url": "/",
    "display": "standalone",
    "theme_color": "#4c1d95",
    "background_color": "#f8fafc",
    "icons": [
        {
            "src": "/icons/icon-192.png",
            "sizes": "192x192",
            "type": "image/png"
        },
        {
            "src": "/icons/icon-512.png",
            "sizes": "512x512",
            "type": "image/png"
        }
    ]
}

// ì„œë¹„ìŠ¤ ì›Œì»¤ ë“±ë¡
if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/sw.js')
        .then(registration => {
            console.log('SW ë“±ë¡ ì„±ê³µ:', registration);
        })
        .catch(error => {
            console.log('SW ë“±ë¡ ì‹¤íŒ¨:', error);
        });
}
```

---

## ğŸ”’ 8. ë³´ì•ˆ ê°•í™”

### 8.1 ì „ì› ì œì–´ ê¶Œí•œ ê´€ë¦¬

```javascript
// ì „ì› ì œì–´ ê¶Œí•œ ì²´í¬
class PowerControlSecurity {
    constructor() {
        this.powerActions = ['wake', 'reboot', 'shutdown'];
        this.sensitiveActions = ['reboot', 'shutdown'];
    }
    
    checkPermission(action, force = false) {
        // ë¯¼ê°í•œ ì‘ì—…ì— ëŒ€í•œ ì¶”ê°€ í™•ì¸
        if (this.sensitiveActions.includes(action)) {
            if (force) {
                return this.requestElevatedPermission(action);
            }
            return this.requestBasicPermission(action);
        }
        
        return true;
    }
    
    requestBasicPermission(action) {
        const confirmMessage = {
            'reboot': 'ì •ë§ ì¬ë¶€íŒ…í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì‹¤í–‰ ì¤‘ì¸ ì‘ì—…ì´ ì¤‘ë‹¨ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
            'shutdown': 'ì •ë§ ì¢…ë£Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ëª¨ë“  ì‘ì—…ì´ ì¤‘ë‹¨ë©ë‹ˆë‹¤.'
        };
        
        return confirm(confirmMessage[action]);
    }
    
    requestElevatedPermission(action) {
        const password = prompt(`ê°•ì œ ${action}ë¥¼ ìœ„í•´ ê´€ë¦¬ì íŒ¨ìŠ¤ì›Œë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”:`);
        
        // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ì„œë²„ì—ì„œ íŒ¨ìŠ¤ì›Œë“œ ê²€ì¦
        return this.validateAdminPassword(password);
    }
    
    async validateAdminPassword(password) {
        try {
            const response = await fetch('/api/auth/validate-admin', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ password })
            });
            
            return response.ok;
        } catch (error) {
            console.error('íŒ¨ìŠ¤ì›Œë“œ ê²€ì¦ ì‹¤íŒ¨:', error);
            return false;
        }
    }
}
```

### 8.2 MAC ì£¼ì†Œ ë³´ì•ˆ

```javascript
// MAC ì£¼ì†Œ ì•”í˜¸í™” ì €ì¥
const crypto = require('crypto');

class MACAddressManager {
    constructor(encryptionKey) {
        this.algorithm = 'aes-256-gcm';
        this.key = crypto.scryptSync(encryptionKey, 'salt', 32);
    }
    
    encryptMAC(macAddress) {
        const iv = crypto.randomBytes(16);
        const cipher = crypto.createCipher(this.algorithm, this.key, iv);
        
        let encrypted = cipher.update(macAddress, 'utf8', 'hex');
        encrypted += cipher.final('hex');
        
        const authTag = cipher.getAuthTag();
        
        return {
            encrypted: encrypted,
            iv: iv.toString('hex'),
            authTag: authTag.toString('hex')
        };
    }
    
    decryptMAC(encryptedData) {
        const decipher = crypto.createDecipher(
            this.algorithm, 
            this.key, 
            Buffer.from(encryptedData.iv, 'hex')
        );
        
        decipher.setAuthTag(Buffer.from(encryptedData.authTag, 'hex'));
        
        let decrypted = decipher.update(encryptedData.encrypted, 'hex', 'utf8');
        decrypted += decipher.final('utf8');
        
        return decrypted;
    }
}
```

---

## ğŸ“Š 9. ëª¨ë‹ˆí„°ë§ ë° ë¦¬í¬íŒ…

### 9.1 ì „ë ¥ ì‚¬ìš© ë¦¬í¬íŠ¸

```javascript
// ì „ë ¥ ì‚¬ìš© ë¦¬í¬íŠ¸ ìƒì„±
class PowerUsageReporter {
    constructor() {
        this.reportTypes = ['daily', 'weekly', 'monthly'];
    }
    
    async generateReport(type, startDate, endDate) {
        const reportData = await this.collectReportData(type, startDate, endDate);
        
        switch (type) {
            case 'daily':
                return this.generateDailyReport(reportData);
            case 'weekly':
                return this.generateWeeklyReport(reportData);
            case 'monthly':
                return this.generateMonthlyReport(reportData);
            default:
                throw new Error(`ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¦¬í¬íŠ¸ íƒ€ì…: ${type}`);
        }
    }
    
    async collectReportData(type, startDate, endDate) {
        const powerLogs = await PowerLog.findAll({
            where: {
                timestamp: {
                    [Op.between]: [startDate, endDate]
                }
            },
            include: ['client'],
            order: [['timestamp', 'ASC']]
        });
        
        return this.processLogData(powerLogs);
    }
    
    generateDailyReport(data) {
        return {
            summary: {
                totalClients: data.clientCount,
                averageUptime: data.averageUptime,
                powerOnEvents: data.powerOnCount,
                powerOffEvents: data.powerOffCount,
                energySaved: data.energySaved,
                costSaved: data.costSaved
            },
            timeline: data.hourlyTimeline,
            clients: data.clientDetails,
            recommendations: this.generateRecommendations(data)
        };
    }
    
    generateRecommendations(data) {
        const recommendations = [];
        
        // ì¥ì‹œê°„ ì¼œì ¸ìˆëŠ” í´ë¼ì´ì–¸íŠ¸ ê°ì§€
        const longRunningClients = data.clientDetails.filter(
            client => client.uptime > 12 * 3600 // 12ì‹œê°„ ì´ìƒ
        );
        
        if (longRunningClients.length > 0) {
            recommendations.push({
                type: 'energy_saving',
                priority: 'medium',
                message: `${longRunningClients.length}ëŒ€ì˜ í´ë¼ì´ì–¸íŠ¸ê°€ 12ì‹œê°„ ì´ìƒ ì¼œì ¸ìˆìŠµë‹ˆë‹¤. ìë™ ì ˆì „ ì„¤ì •ì„ ê²€í† í•´ë³´ì„¸ìš”.`,
                clients: longRunningClients.map(c => c.name)
            });
        }
        
        // ë¶ˆí•„ìš”í•œ ë¶€íŒ… íŒ¨í„´ ê°ì§€
        const frequentRebootClients = data.clientDetails.filter(
            client => client.rebootCount > 3
        );
        
        if (frequentRebootClients.length > 0) {
            recommendations.push({
                type: 'stability',
                priority: 'high',
                message: `${frequentRebootClients.length}ëŒ€ì˜ í´ë¼ì´ì–¸íŠ¸ê°€ ìì£¼ ì¬ë¶€íŒ…ë©ë‹ˆë‹¤. í•˜ë“œì›¨ì–´ ë¬¸ì œë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.`,
                clients: frequentRebootClients.map(c => c.name)
            });
        }
        
        return recommendations;
    }
    
    async exportReportToExcel(reportData, filename) {
        const ExcelJS = require('exceljs');
        const workbook = new ExcelJS.Workbook();
        
        // ìš”ì•½ ì‹œíŠ¸
        const summarySheet = workbook.addWorksheet('ìš”ì•½');
        summarySheet.addRow(['í•­ëª©', 'ê°’']);
        summarySheet.addRow(['ì „ì²´ í´ë¼ì´ì–¸íŠ¸', reportData.summary.totalClients]);
        summarySheet.addRow(['í‰ê·  ê°€ë™ì‹œê°„', `${Math.round(reportData.summary.averageUptime/3600)}ì‹œê°„`]);
        summarySheet.addRow(['ì „ì› ì¼œê¸° íšŸìˆ˜', reportData.summary.powerOnEvents]);
        summarySheet.addRow(['ì „ì› ë„ê¸° íšŸìˆ˜', reportData.summary.powerOffEvents]);
        summarySheet.addRow(['ì ˆì•½ëœ ì „ë ¥', `${reportData.summary.energySaved}kWh`]);
        summarySheet.addRow(['ì ˆì•½ëœ ë¹„ìš©', `${reportData.summary.costSaved.toLocaleString()}ì›`]);
        
        // í´ë¼ì´ì–¸íŠ¸ ìƒì„¸ ì‹œíŠ¸
        const clientSheet = workbook.addWorksheet('í´ë¼ì´ì–¸íŠ¸ ìƒì„¸');
        clientSheet.addRow(['ì´ë¦„', 'IP ì£¼ì†Œ', 'ê°€ë™ì‹œê°„', 'ì „ì› ì¼œê¸°', 'ì „ì› ë„ê¸°', 'ì¬ë¶€íŒ…']);
        
        reportData.clients.forEach(client => {
            clientSheet.addRow([
                client.name,
                client.ip_address,
                `${Math.round(client.uptime/3600)}ì‹œê°„`,
                client.powerOnCount,
                client.powerOffCount,
                client.rebootCount
            ]);
        });
        
        // íŒŒì¼ ì €ì¥
        await workbook.xlsx.writeFile(filename);
        return filename;
    }
}
```

### 9.2 ì•Œë¦¼ ì‹œìŠ¤í…œ

```javascript
// ì „ì› ê´€ë¦¬ ì•Œë¦¼
class PowerNotificationManager {
    constructor(socketManager) {
        this.socketManager = socketManager;
        this.notificationRules = new Map();
        this.setupDefaultRules();
    }
    
    setupDefaultRules() {
        // ì¥ì‹œê°„ ê°€ë™ ì•Œë¦¼
        this.addRule('long_running', {
            condition: (client) => client.uptime > 16 * 3600, // 16ì‹œê°„
            message: (client) => `${client.name}ì´(ê°€) 16ì‹œê°„ ì´ìƒ ê°€ë™ì¤‘ì…ë‹ˆë‹¤. ì ˆì „ì„ ê²€í† í•´ë³´ì„¸ìš”.`,
            level: 'warning',
            cooldown: 4 * 3600 // 4ì‹œê°„ë§ˆë‹¤ ì•Œë¦¼
        });
        
        // ë¹ˆë²ˆí•œ ì¬ë¶€íŒ… ì•Œë¦¼
        this.addRule('frequent_reboot', {
            condition: (client) => client.rebootCount > 5,
            message: (client) => `${client.name}ì—ì„œ ë¹ˆë²ˆí•œ ì¬ë¶€íŒ…ì´ ê°ì§€ë˜ì—ˆìŠµë‹ˆë‹¤. í•˜ë“œì›¨ì–´ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.`,
            level: 'error',
            cooldown: 24 * 3600 // 24ì‹œê°„ë§ˆë‹¤ ì•Œë¦¼
        });
        
        // ë¶€íŒ… ì‹¤íŒ¨ ì•Œë¦¼
        this.addRule('boot_failure', {
            condition: (client) => client.lastBootAttempt && !client.lastBootSuccess,
            message: (client) => `${client.name}ì˜ ë¶€íŒ…ì´ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ í™•ì¸í•´ì£¼ì„¸ìš”.`,
            level: 'error',
            cooldown: 1800 // 30ë¶„ë§ˆë‹¤ ì•Œë¦¼
        });
    }
    
    addRule(name, rule) {
        this.notificationRules.set(name, {
            ...rule,
            lastNotified: new Map()
        });
    }
    
    checkNotifications(clients) {
        clients.forEach(client => {
            this.notificationRules.forEach((rule, ruleName) => {
                if (rule.condition(client)) {
                    const lastNotified = rule.lastNotified.get(client.id) || 0;
                    const now = Date.now();
                    
                    if (now - lastNotified > rule.cooldown * 1000) {
                        this.sendNotification({
                            rule: ruleName,
                            client: client,
                            message: rule.message(client),
                            level: rule.level,
                            timestamp: new Date()
                        });
                        
                        rule.lastNotified.set(client.id, now);
                    }
                }
            });
        });
    }
    
    sendNotification(notification) {
        // ì›¹ í´ë¼ì´ì–¸íŠ¸ì— ì•Œë¦¼ ì „ì†¡
        this.socketManager.broadcast('power_notification', notification);
        
        // ë¡œê·¸ ê¸°ë¡
        console.log(`ğŸ“¢ ì „ì› ê´€ë¦¬ ì•Œë¦¼: ${notification.message}`);
        
        // ì´ë©”ì¼ ì•Œë¦¼ (ì„¤ì •ëœ ê²½ìš°)
        if (process.env.EMAIL_NOTIFICATIONS === 'true') {
            this.sendEmailNotification(notification);
        }
    }
    
    async sendEmailNotification(notification) {
        // ì´ë©”ì¼ ì•Œë¦¼ êµ¬í˜„ (nodemailer ë“± ì‚¬ìš©)
        // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ì„¤ì •ëœ ê´€ë¦¬ì ì´ë©”ì¼ë¡œ ë°œì†¡
    }
}
```

---

## ğŸ¯ 10. v2.1 ì™„ì„± ê¸°ì¤€

### 10.1 í•µì‹¬ ê¸°ëŠ¥ ê²€ì¦

**ì „ì› ì œì–´ ê¸°ëŠ¥:**
- [ ] Wake-on-LANìœ¼ë¡œ ì›ê²© ë¶€íŒ… ì„±ê³µë¥  95% ì´ìƒ
- [ ] ì•ˆì „í•œ ì¬ë¶€íŒ…/ì¢…ë£Œ 100% ì„±ê³µ
- [ ] ìˆœì°¨ ë¶€íŒ…ìœ¼ë¡œ ì „ë ¥ ë¶€í•˜ ë¶„ì‚° ë™ì‘
- [ ] ê°•ì œ ì œì–´ ì˜µì…˜ ì •ìƒ ë™ì‘

**ìŠ¤ì¼€ì¤„ë§ ê¸°ëŠ¥:**
- [ ] ì¶œê·¼/í‡´ê·¼ ì‹œê°„ ìë™ ì œì–´ ì •í™•ë„ 100%
- [ ] ì ˆì „ ìŠ¤ì¼€ì¤„ ì •ìƒ ë™ì‘
- [ ] ì˜ˆì™¸ ìƒí™© (ê³µíœ´ì¼ ë“±) ì ì ˆí•œ ì²˜ë¦¬

**ëª¨ë‹ˆí„°ë§ ê¸°ëŠ¥:**
- [ ] ì‹¤ì‹œê°„ ì „ë ¥ ìƒíƒœ ì •í™•í•œ í‘œì‹œ
- [ ] ì „ë ¥ ì‚¬ìš© ë¦¬í¬íŠ¸ ìƒì„± ê°€ëŠ¥
- [ ] ì•Œë¦¼ ì‹œìŠ¤í…œ ì •ìƒ ë™ì‘

### 10.2 ì„±ëŠ¥ ë° ì•ˆì •ì„±

**ì„±ëŠ¥ ìš”êµ¬ì‚¬í•­:**
- [ ] 100ëŒ€ í´ë¼ì´ì–¸íŠ¸ ë™ì‹œ ì „ì› ì œì–´ ê°€ëŠ¥
- [ ] ë¶€íŒ… ì™„ë£Œ ê°ì§€ í‰ê·  3ë¶„ ì´ë‚´
- [ ] ìŠ¤ì¼€ì¤„ ì‹¤í–‰ ì •í™•ë„ Â±5ë¶„ ì´ë‚´

**ì•ˆì •ì„± ìš”êµ¬ì‚¬í•­:**
- [ ] 1ì£¼ì¼ ì—°ì† ìŠ¤ì¼€ì¤„ ìš´ì˜ ë¬´ì¥ì• 
- [ ] ë„¤íŠ¸ì›Œí¬ ì¥ì•  ì‹œ ìë™ ë³µêµ¬
- [ ] ì „ì› ì œì–´ ì‹¤íŒ¨ ì‹œ ì ì ˆí•œ ì˜¤ë¥˜ ì²˜ë¦¬

### 10.3 ì‚¬ìš©ì„±

**ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤:**
- [ ] ì§ê´€ì ì¸ ì „ì› ì œì–´ ë²„íŠ¼ ë°°ì¹˜
- [ ] ëª¨ë°”ì¼ì—ì„œ ì›í™œí•œ ì „ì› ì œì–´ ê°€ëŠ¥
- [ ] ì¼ê´„ ì‘ì—… ì§„í–‰ ìƒí™© ëª…í™•í•œ í‘œì‹œ

**ê´€ë¦¬ í¸ì˜ì„±:**
- [ ] ìŠ¤ì¼€ì¤„ ì„¤ì • 5ë¶„ ì´ë‚´ ì™„ë£Œ
- [ ] ì „ë ¥ ë¦¬í¬íŠ¸ ìë™ ìƒì„± ë° ë‚´ë³´ë‚´ê¸°
- [ ] ì¥ì•  ìƒí™© ì¦‰ì‹œ ì•Œë¦¼

---

## ğŸ”® 11. v2.2 ì—°ê³„ ê³„íš

v2.1 ì™„ì„± í›„ v2.2ì—ì„œ í™•ì¥í•  ê¸°ëŠ¥ë“¤:

**í”„ë¡œì í„° í†µí•© ê´€ë¦¬:**
- ë””ìŠ¤í”Œë ˆì´ PC + í”„ë¡œì í„° ì—°ë™ ì „ì› ì œì–´
- í†µí•© ìŠ¤ì¼€ì¤„ë§ (PC ë¶€íŒ… â†’ í”„ë¡œì í„° ì¼œê¸° â†’ ì…ë ¥ ì†ŒìŠ¤ ì„¤ì •)
- í”„ë¡œì í„° ìƒíƒœ ëª¨ë‹ˆí„°ë§ ì—°ë™

**ê³ ê¸‰ ì „ë ¥ ê´€ë¦¬:**
- ìŠ¤ë§ˆíŠ¸ ì ˆì „ ëª¨ë“œ (ì‚¬ìš© íŒ¨í„´ í•™ìŠµ)
- ì „ë ¥ ë¶€í•˜ ì˜ˆì¸¡ ë° ìµœì í™”
- íƒ„ì†Œ ë°œìêµ­ ì¶”ì 

---

## ğŸ“‹ 12. ë§ˆë¬´ë¦¬

**v2.1ì˜ í•µì‹¬ ê°€ì¹˜:**
1. **ì™„ì „í•œ ì „ì› ê´€ë¦¬**: PC ìƒëª…ì£¼ê¸° ì „ì²´ ì œì–´
2. **ì—ë„ˆì§€ íš¨ìœ¨ì„±**: ìŠ¤ë§ˆíŠ¸ ìŠ¤ì¼€ì¤„ë§ìœ¼ë¡œ ì „ë ¥ ì ˆì•½
3. **ìš´ì˜ í¸ì˜ì„±**: ì¶œê·¼ í•œ ë²ˆì˜ í´ë¦­ìœ¼ë¡œ ëª¨ë“  ì‹œìŠ¤í…œ ê°€ë™
4. **í™•ì¥ì„±**: v2.2 í”„ë¡œì í„° í†µí•©ì„ ìœ„í•œ ê¸°ë°˜ êµ¬ì¶•

**Ready for Power Management!** âš¡