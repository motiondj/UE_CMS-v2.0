<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Switchboard Plus v2 - nDisplay Control</title>
    <style>
        /* ğŸ¨ CSS ë³€ìˆ˜ ì •ì˜ (ë¼ì´íŠ¸/ë‹¤í¬ í…Œë§ˆ) */
        :root {
            --bg-primary: #f8fafc;
            --bg-secondary: #ffffff;
            --bg-tertiary: #f8fafc;
            --text-primary: #333333;
            --text-secondary: #1e293b;
            --text-muted: #64748b;
            --border-color: #e2e8f0;
            --border-hover: #3b82f6;
            --shadow-color: rgba(0,0,0,0.1);
            --modal-overlay: rgba(0,0,0,0.5);
            
            /* í´ë¼ì´ì–¸íŠ¸ ìƒíƒœ ìƒ‰ìƒ */
            --client-online: #fef3c7;
            --client-running: #dcfce7;
            --client-offline: #fef2f2;
            
            /* ë²„íŠ¼ ìƒ‰ìƒ */
            --btn-primary: #22c55e;
            --btn-primary-hover: #16a34a;
            --btn-danger: #ef4444;
            --btn-danger-hover: #dc2626;
            --btn-secondary: #64748b;
            --btn-secondary-hover: #475569;
            
            /* ì¶”ê°€ ìƒ‰ìƒ */
            --success-bg: #f0fdf4;
            --warning-bg: #fef3c7;
            --error-bg: #fef2f2;
            --info-bg: #f0f9ff;
        }

        /* ğŸŒ™ ë‹¤í¬ í…Œë§ˆ */
        [data-theme="dark"] {
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-tertiary: #334155;
            --text-primary: #f1f5f9;
            --text-secondary: #e2e8f0;
            --text-muted: #94a3b8;
            --border-color: #334155;
            --border-hover: #3b82f6;
            --shadow-color: rgba(0,0,0,0.3);
            --modal-overlay: rgba(0,0,0,0.7);
            
            /* ë‹¤í¬ ëª¨ë“œ í´ë¼ì´ì–¸íŠ¸ ìƒíƒœ ìƒ‰ìƒ */
            --client-online: #422006;
            --client-running: #14532d;
            --client-offline: #450a0a;
            
            /* ë‹¤í¬ ëª¨ë“œ ì¶”ê°€ ìƒ‰ìƒ */
            --success-bg: #14532d;
            --warning-bg: #422006;
            --error-bg: #450a0a;
            --info-bg: #1e3a8a;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* ğŸ¨ í—¤ë” */
        .header {
            background: linear-gradient(135deg, #4c1d95 0%, #6366f1 50%, #71717a 100%);
            color: white;
            padding: 12px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            font-size: 20px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-info {
            display: flex;
            gap: 15px;
            font-size: 12px;
            align-items: center;
        }

        /* Socket ì—°ê²° ìƒíƒœ í‘œì‹œ */
        .socket-status {
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }

        .socket-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #22c55e;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .socket-indicator.disconnected {
            background: #ef4444;
            animation: none;
        }

        .settings-btn {
            background: rgba(255,255,255,0.15);
            border: none;
            color: white;
            padding: 6px 8px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
        }

        .settings-btn:hover {
            background: rgba(255,255,255,0.25);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* ğŸ“Š í†µê³„ ë°” */
        .stats-bar {
            background: var(--bg-secondary);
            border-radius: 8px;
            padding: 25px 30px;
            margin-bottom: 20px;
            box-shadow: 0 1px 3px var(--shadow-color);
            transition: background-color 0.3s ease;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 30px;
            text-align: center;
        }

        .stat-item {
            padding: 5px;
        }

        .stat-value {
            font-size: 36px;
            font-weight: 700;
            color: #3b82f6;
            line-height: 1;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 12px;
            color: var(--text-muted);
            font-weight: 400;
        }

        /* ğŸ“‹ ë©”ì¸ ë ˆì´ì•„ì›ƒ */
        .main-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .section {
            background: var(--bg-secondary);
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 1px 3px var(--shadow-color);
            transition: background-color 0.3s ease;
        }

        .section-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--text-secondary);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* ğŸ”˜ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .btn {
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            padding: 0;
        }

        .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 4px var(--shadow-color);
        }

        .btn-primary {
            background: var(--btn-primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--btn-primary-hover);
        }

        .btn-danger {
            background: var(--btn-danger);
            color: white;
        }

        .btn-danger:hover {
            background: var(--btn-danger-hover);
        }

        .btn-secondary {
            background: var(--btn-secondary);
            color: white;
        }

        .btn-secondary:hover {
            background: var(--btn-secondary-hover);
        }

        /* í…ìŠ¤íŠ¸ê°€ ìˆëŠ” ë²„íŠ¼ */
        .btn-with-text {
            width: auto;
            padding: 6px 12px;
            font-size: 12px;
            min-width: 80px;
            height: 28px;
        }

        /* ì¼ê´„ ì œì–´ ë²„íŠ¼ */
        .btn-bulk {
            width: auto;
            padding: 4px 8px;
            font-size: 11px;
            min-width: 60px;
            height: 26px;
        }

        /* ğŸ“ í”„ë¦¬ì…‹ ì¹´ë“œ */
        .preset-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .preset-card {
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 15px;
            transition: all 0.2s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--bg-secondary);
            position: relative;
        }

        .preset-card:hover {
            border-color: var(--border-hover);
            background: var(--bg-tertiary);
        }

        .preset-card.active {
            border-color: #22c55e;
            background: var(--success-bg);
        }

        .preset-checkbox {
            position: absolute;
            top: 12px;
            left: 12px;
            width: 16px;
            height: 16px;
            z-index: 1;
        }

        .preset-content {
            flex: 1;
            margin-left: 24px;
        }

        .preset-name {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }

        .preset-info {
            font-size: 11px;
            color: var(--text-muted);
            line-height: 1.3;
        }

        .preset-actions {
            display: flex;
            gap: 4px;
            flex-shrink: 0;
        }

        /* ğŸ‘¥ ê·¸ë£¹ ì¹´ë“œ */
        .group-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .group-card {
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 15px;
            transition: all 0.2s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--bg-secondary);
            position: relative;
        }

        .group-card:hover {
            border-color: var(--border-hover);
            background: var(--bg-tertiary);
        }

        .group-checkbox {
            position: absolute;
            top: 12px;
            left: 12px;
            width: 16px;
            height: 16px;
            z-index: 1;
        }

        .group-content {
            flex: 1;
            margin-left: 24px;
        }

        .group-name {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }

        .group-info {
            font-size: 11px;
            color: var(--text-muted);
            margin-bottom: 8px;
        }

        .group-clients {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
        }

        .group-actions {
            display: flex;
            gap: 4px;
            flex-shrink: 0;
            align-items: center;
        }

        .client-tag {
            background: #22c55e;
            color: white;
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 10px;
            font-weight: 500;
        }

        /* ì¼ê´„ ì œì–´ UI */
        .bulk-controls {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 12px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background-color 0.3s ease;
        }

        .selection-info {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 12px;
            color: var(--text-muted);
        }

        .bulk-actions {
            display: flex;
            gap: 6px;
        }

        /* ğŸ–¥ï¸ ë””ìŠ¤í”Œë ˆì´ ì„œë²„ ëª¨ë‹ˆí„°ë§ - ê°œì„ ëœ ë²„ì „ */
        .client-monitor {
            background: var(--bg-secondary);
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 1px 3px var(--shadow-color);
            transition: background-color 0.3s ease;
        }

        .monitor-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .client-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 12px;
        }

        .client-item {
            background: var(--client-online);
            border-radius: 6px;
            padding: 12px 8px;
            text-align: center;
            transition: all 0.2s ease;
            cursor: pointer;
            position: relative;
            border: 2px solid transparent;
        }

        .client-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px var(--shadow-color);
        }

        .client-item.online {
            background: var(--client-online);
            border-color: #f59e0b;
        }

        .client-item.running {
            background: var(--client-running);
            border-color: #22c55e;
        }

        .client-item.offline {
            background: var(--client-offline);
            border-color: #ef4444;
            opacity: 0.7;
        }

        .client-icon {
            font-size: 24px;
            margin-bottom: 6px;
        }

        .client-name {
            font-weight: 600;
            font-size: 12px;
            margin-bottom: 2px;
            color: var(--text-secondary);
        }

        .client-ip {
            font-size: 10px;
            color: var(--text-muted);
            margin-bottom: 4px;
        }

        .client-status {
            font-size: 9px;
            color: var(--text-muted);
            font-weight: 500;
            margin-bottom: 4px;
        }

        /* ì„±ëŠ¥ ë©”íŠ¸ë¦­ í‘œì‹œ - ê³„íšì„œ ë°˜ì˜ */
        .client-metrics {
            margin-top: 4px;
            padding-top: 4px;
            border-top: 1px solid var(--border-color);
            font-size: 9px;
            color: var(--text-muted);
            line-height: 1.2;
        }

        .client-metrics.visible {
            display: block;
        }

        /* ì‹¤í–‰ ID í‘œì‹œ */
        .execution-id {
            position: absolute;
            top: 4px;
            right: 4px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 2px 4px;
            border-radius: 4px;
            font-size: 8px;
            font-weight: 600;
        }

        /* ğŸ“Š ì‹¤í–‰ ëª¨ë‹ˆí„°ë§ ì„¹ì…˜ - ê³„íšì„œ ë°˜ì˜ */
        .execution-monitor {
            background: var(--bg-secondary);
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 1px 3px var(--shadow-color);
            transition: background-color 0.3s ease;
        }

        .execution-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            max-height: 400px;
            overflow-y: auto;
        }

        .execution-item {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 12px;
            transition: all 0.2s ease;
        }

        .execution-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .execution-details {
            font-size: 11px;
            color: var(--text-muted);
            margin-bottom: 8px;
        }

        .execution-targets {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
            margin-bottom: 8px;
        }

        .target-client {
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 9px;
            font-weight: 500;
        }

        .target-client.success {
            background: var(--success-bg);
            color: #14532d;
        }

        .target-client.failed {
            background: var(--error-bg);
            color: #991b1b;
        }

        .target-client.pending {
            background: var(--warning-bg);
            color: #92400e;
        }

        .execution-status {
            font-size: 10px;
            padding: 2px 8px;
            border-radius: 12px;
            font-weight: 600;
        }

        .execution-status.pending {
            background: var(--warning-bg);
            color: #92400e;
        }

        .execution-status.running {
            background: var(--info-bg);
            color: #1e40af;
        }

        .execution-status.completed {
            background: var(--success-bg);
            color: #14532d;
        }

        .execution-status.failed {
            background: var(--error-bg);
            color: #991b1b;
        }

        .execution-progress {
            height: 4px;
            background: var(--border-color);
            border-radius: 2px;
            overflow: hidden;
            margin-top: 8px;
        }

        .execution-progress-bar {
            height: 100%;
            background: #3b82f6;
            transition: width 0.3s ease;
        }

        /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
        .modal {
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: var(--modal-overlay);
            display: none;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: var(--bg-secondary);
            border-radius: 8px;
            padding: 20px;
            max-width: 500px;
            width: 90%;
            max-height: 80%;
            overflow-y: auto;
            animation: modalSlideIn 0.3s ease;
            transition: background-color 0.3s ease;
        }

        @keyframes modalSlideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }

        .modal-header h3 {
            color: var(--text-secondary);
        }

        .close {
            font-size: 24px;
            cursor: pointer;
            color: var(--text-muted);
        }

        .close:hover {
            color: #ef4444;
        }

        /* ì •ë³´ ì„¹ì…˜ */
        .info-section {
            margin-bottom: 20px;
        }

        .info-section h4 {
            font-size: 14px;
            margin-bottom: 10px;
            color: var(--text-secondary);
        }

        .info-grid {
            display: grid;
            gap: 8px;
            font-size: 12px;
            color: var(--text-muted);
        }

        /* ë²„íŠ¼ ê·¸ë£¹ */
        .button-group {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        /* ìœ„í—˜ êµ¬ì—­ ìŠ¤íƒ€ì¼ */
        .danger-section {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #fee2e2;
        }

        .warning-text {
            font-size: 11px;
            color: #991b1b;
            margin-top: 5px;
        }

        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 1024px) {
            .main-layout {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 20px;
            }
            
            .preset-grid,
            .group-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 8px;
                text-align: center;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }
            
            .section {
                padding: 15px;
            }

            .bulk-controls {
                flex-direction: column;
                gap: 10px;
            }
            
            .preset-grid,
            .group-grid {
                grid-template-columns: 1fr;
            }

            .client-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
        }

        /* í¼ ìŠ¤íƒ€ì¼ */
        .form-group {
            margin-bottom: 16px;
        }

        .form-group label {
            display: block;
            font-size: 13px;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 6px;
        }

        .form-input {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 13px;
            font-family: inherit;
            transition: border-color 0.2s;
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .form-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        textarea.form-input {
            resize: vertical;
            min-height: 60px;
        }

        .form-help {
            display: block;
            font-size: 11px;
            color: var(--text-muted);
            margin-top: 4px;
        }

        .checkbox-group {
            display: grid;
            gap: 8px;
            max-height: 200px;
            overflow-y: auto;
            padding: 8px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            transition: background-color 0.3s ease;
        }

        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            transition: background 0.2s;
            color: var(--text-primary);
        }

        .checkbox-label:hover {
            background: var(--border-color);
        }

        .checkbox-label input[type="checkbox"] {
            width: 16px;
            height: 16px;
            cursor: pointer;
        }

        .modal-actions {
            display: flex;
            justify-content: flex-end;
            gap: 8px;
            margin-top: 24px;
            padding-top: 16px;
            border-top: 1px solid var(--border-color);
        }

        /* í† ìŠ¤íŠ¸ */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--text-secondary);
            color: white;
            padding: 12px 16px;
            border-radius: 6px;
            display: none;
            animation: slideIn 0.3s ease;
            box-shadow: 0 4px 12px var(--shadow-color);
            font-size: 12px;
            transition: background-color 0.3s ease;
            max-width: 300px;
            z-index: 1001;
        }

        .toast.success {
            background: #22c55e;
        }

        .toast.error {
            background: #ef4444;
        }

        .toast.warning {
            background: #f59e0b;
        }

        .toast.info {
            background: #3b82f6;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
            }
            to {
                transform: translateX(0);
            }
        }

        /* ë¡œë”© ìŠ¤í”¼ë„ˆ */
        .spinner {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* ìƒíƒœ ë±ƒì§€ */
        .status-badge {
            display: inline-block;
            padding: 2px 8px;
            font-size: 10px;
            font-weight: 600;
            border-radius: 12px;
            text-transform: uppercase;
        }

        .status-badge.online {
            background: var(--success-bg);
            color: #14532d;
        }

        .status-badge.offline {
            background: var(--error-bg);
            color: #991b1b;
        }

        .status-badge.running {
            background: var(--info-bg);
            color: #1e40af;
        }

        /* ì—°ê²° íˆìŠ¤í† ë¦¬ í‘œì‹œ */
        .connection-history {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid var(--border-color);
            font-size: 10px;
            color: var(--text-muted);
        }

        .history-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 4px;
        }

        /* API ì—°ê²° ìƒíƒœ í‘œì‹œ */
        .api-status {
            position: fixed;
            top: 70px;
            right: 20px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 8px 12px;
            font-size: 11px;
            box-shadow: 0 2px 8px var(--shadow-color);
            z-index: 999;
            display: none;
        }

        .api-status.visible {
            display: block;
        }

        .api-indicator {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 6px;
        }

        .api-indicator.connected {
            background: #22c55e;
        }

        .api-indicator.disconnected {
            background: #ef4444;
        }
    </style>
</head>
<body>
    <!-- API ì—°ê²° ìƒíƒœ í‘œì‹œ -->
    <div class="api-status" id="apiStatus">
        <span class="api-indicator disconnected" id="apiIndicator"></span>
        <span id="apiStatusText">API ì—°ê²° ì¤‘...</span>
    </div>

    <!-- í—¤ë” -->
    <div class="header">
        <div class="header-content">
            <h1>âš¡ Switchboard Plus v2.0</h1>
            <div class="status-info">
                <div class="socket-status">
                    Socket ìƒíƒœ: 
                    <span class="socket-indicator" id="socketIndicator"></span>
                    <span style="color: #22c55e; font-weight: 600;" id="socketStatus">ì—°ê²° ì¤‘...</span>
                </div>
                <div>ì‹œê°„: <span id="current-time">12:05:15</span></div>
                <div>ì—°ê²°ëœ í´ë¼ì´ì–¸íŠ¸: <span style="color: #22c55e; font-weight: 600;" id="connectedCount">0</span></div>
                <button class="settings-btn" onclick="toggleDarkMode()" id="themeToggle">ğŸŒ™</button>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- í†µê³„ ë°” -->
        <div class="stats-bar">
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-value" id="totalClients">0</div>
                    <div class="stat-label">ì „ì²´ ë””ìŠ¤í”Œë ˆì´ ì„œë²„</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="onlineClients">0</div>
                    <div class="stat-label">ì˜¨ë¼ì¸</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="runningClients">0</div>
                    <div class="stat-label">ì‹¤í–‰ ì¤‘</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="activeExecutions">0</div>
                    <div class="stat-label">í™œì„± ì‹¤í–‰</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="totalGroups">0</div>
                    <div class="stat-label">ê·¸ë£¹ ìˆ˜</div>
                </div>
            </div>
        </div>

        <!-- ë©”ì¸ ë ˆì´ì•„ì›ƒ -->
        <div class="main-layout">
            <!-- ì½˜í…ì¸  í”„ë¦¬ì…‹ -->
            <div class="section">
                <h2 class="section-title">
                    ì½˜í…ì¸  í”„ë¦¬ì…‹
                    <button class="btn btn-secondary btn-with-text" onclick="showAddPresetModal()">
                        â• ìƒˆ í”„ë¦¬ì…‹
                    </button>
                </h2>
                
                <!-- í”„ë¦¬ì…‹ ì¼ê´„ ì œì–´ UI -->
                <div class="bulk-controls">
                    <div class="selection-info">
                        <label>
                            <input type="checkbox" id="selectAllPresets" onchange="toggleSelectAllPresets()">
                            ì „ì²´ ì„ íƒ
                        </label>
                        <span>ì„ íƒëœ í”„ë¦¬ì…‹: <span id="selectedPresetCount">0</span>ê°œ</span>
                    </div>
                    <div class="bulk-actions">
                        <button class="btn btn-primary btn-bulk" onclick="bulkPresetAction('execute')" title="ì„ íƒëœ í”„ë¦¬ì…‹ë“¤ ì „ì²´ ì‹¤í–‰">
                            â–¶ï¸
                        </button>
                        <button class="btn btn-danger btn-bulk" onclick="bulkPresetAction('stop')" title="ì„ íƒëœ í”„ë¦¬ì…‹ë“¤ ì „ì²´ ì •ì§€">
                            â¹ï¸
                        </button>
                        <button class="btn btn-danger btn-bulk" onclick="bulkPresetAction('delete')" title="ì„ íƒëœ í”„ë¦¬ì…‹ë“¤ ì „ì²´ ì‚­ì œ">
                            ğŸ—‘ï¸
                        </button>
                    </div>
                </div>

                <div class="preset-grid" id="presetGrid">
                    <!-- í”„ë¦¬ì…‹ì´ ì—†ì„ ë•Œ í‘œì‹œ -->
                    <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: var(--text-muted);">
                        <div style="font-size: 48px; margin-bottom: 16px;">ğŸ“</div>
                        <div style="font-size: 14px; margin-bottom: 8px;">ì•„ì§ ìƒì„±ëœ í”„ë¦¬ì…‹ì´ ì—†ìŠµë‹ˆë‹¤</div>
                        <div style="font-size: 12px;">ìƒˆ í”„ë¦¬ì…‹ ë²„íŠ¼ì„ í´ë¦­í•´ì„œ ì²« ë²ˆì§¸ í”„ë¦¬ì…‹ì„ ë§Œë“¤ì–´ë³´ì„¸ìš”!</div>
                    </div>
                </div>
            </div>

            <!-- ë””ìŠ¤í”Œë ˆì´ ì„œë²„ ê·¸ë£¹ -->
            <div class="section">
                <h2 class="section-title">
                    ë””ìŠ¤í”Œë ˆì´ ì„œë²„ ê·¸ë£¹
                    <button class="btn btn-secondary btn-with-text" onclick="showAddGroupModal()">
                        â• ìƒˆ ê·¸ë£¹
                    </button>
                </h2>
                
                <!-- ê·¸ë£¹ ì¼ê´„ ì œì–´ UI -->
                <div class="bulk-controls">
                    <div class="selection-info">
                        <label>
                            <input type="checkbox" id="selectAllGroups" onchange="toggleSelectAllGroups()">
                            ì „ì²´ ì„ íƒ
                        </label>
                        <span>ì„ íƒëœ ê·¸ë£¹: <span id="selectedGroupCount">0</span>ê°œ</span>
                    </div>
                    <div class="bulk-actions">
                        <button class="btn btn-primary btn-bulk" onclick="bulkGroupAction('on')" title="ì„ íƒëœ ê·¸ë£¹ë“¤ ì „ì²´ ì¼œê¸°">
                            ğŸ”Œ
                        </button>
                        <button class="btn btn-secondary btn-bulk" onclick="bulkGroupAction('reboot')" title="ì„ íƒëœ ê·¸ë£¹ë“¤ ì „ì²´ ì¬ë¶€íŒ…">
                            ğŸ”„
                        </button>
                        <button class="btn btn-danger btn-bulk" onclick="bulkGroupAction('off')" title="ì„ íƒëœ ê·¸ë£¹ë“¤ ì „ì²´ ë„ê¸°">
                            âš¡
                        </button>
                    </div>
                </div>

                <div class="group-grid" id="groupGrid">
                    <!-- ê·¸ë£¹ì´ ì—†ì„ ë•Œ í‘œì‹œ -->
                    <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: var(--text-muted);">
                        <div style="font-size: 48px; margin-bottom: 16px;">ğŸ‘¥</div>
                        <div style="font-size: 14px; margin-bottom: 8px;">ì•„ì§ ìƒì„±ëœ ê·¸ë£¹ì´ ì—†ìŠµë‹ˆë‹¤</div>
                        <div style="font-size: 12px;">ìƒˆ ê·¸ë£¹ ë²„íŠ¼ì„ í´ë¦­í•´ì„œ ì²« ë²ˆì§¸ ê·¸ë£¹ì„ ë§Œë“¤ì–´ë³´ì„¸ìš”!</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ë””ìŠ¤í”Œë ˆì´ ì„œë²„ ëª¨ë‹ˆí„°ë§ -->
        <div class="client-monitor">
            <div class="monitor-header">
                <h2 class="section-title">
                    ë””ìŠ¤í”Œë ˆì´ ì„œë²„ ëª¨ë‹ˆí„°ë§
                    <span style="font-size: 12px; color: var(--text-muted); font-weight: normal;">
                        ìë™ ìƒˆë¡œê³ ì¹¨: <span id="refreshInterval">30ì´ˆ</span>
                    </span>
                </h2>
                <button class="btn btn-secondary btn-with-text" onclick="showAddClientModal()">
                    â• í´ë¼ì´ì–¸íŠ¸ ì¶”ê°€
                </button>
            </div>

            <div class="client-grid" id="clientGrid">
                <!-- í´ë¼ì´ì–¸íŠ¸ê°€ ì—†ì„ ë•Œ í‘œì‹œ -->
                <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: var(--text-muted);">
                    <div style="font-size: 48px; margin-bottom: 16px;">ğŸ–¥ï¸</div>
                    <div style="font-size: 14px; margin-bottom: 8px;">ì—°ê²°ëœ ë””ìŠ¤í”Œë ˆì´ ì„œë²„ê°€ ì—†ìŠµë‹ˆë‹¤</div>
                    <div style="font-size: 12px;">í´ë¼ì´ì–¸íŠ¸ ì¶”ê°€ ë²„íŠ¼ì„ í´ë¦­í•˜ê±°ë‚˜ Python í´ë¼ì´ì–¸íŠ¸ê°€ ì—°ê²°ë˜ë©´ ìë™ìœ¼ë¡œ ë‚˜íƒ€ë‚©ë‹ˆë‹¤</div>
                </div>
            </div>
        </div>

        <!-- ì‹¤í–‰ ëª¨ë‹ˆí„°ë§ ì„¹ì…˜ -->
        <div class="execution-monitor" id="executionMonitor" style="display: none;">
            <h2 class="section-title">
                í”„ë¦¬ì…‹ ì‹¤í–‰ íˆìŠ¤í† ë¦¬
                <span style="font-size: 12px; color: var(--text-muted); font-weight: normal;">
                    ìµœê·¼ 10ê°œ í‘œì‹œ | ìë™ ì—…ë°ì´íŠ¸
                </span>
            </h2>
            <div class="execution-list" id="executionList">
                <!-- ì‹¤í–‰ íˆìŠ¤í† ë¦¬ê°€ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
            </div>
        </div>
    </div>

    <!-- í´ë¼ì´ì–¸íŠ¸ ì¶”ê°€ ëª¨ë‹¬ -->
    <div class="modal" id="addClientModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ìƒˆ ë””ìŠ¤í”Œë ˆì´ ì„œë²„ ì¶”ê°€</h3>
                <span class="close" onclick="closeAddClientModal()">&times;</span>
            </div>
            
            <div class="modal-body">
                <form id="addClientForm">
                    <div class="form-group">
                        <label for="clientName">í´ë¼ì´ì–¸íŠ¸ ì´ë¦„</label>
                        <input type="text" id="clientName" class="form-input" placeholder="ì˜ˆ: Display_01" required>
                        <small class="form-help">ì•Œì•„ë³´ê¸° ì‰¬ìš´ ì´ë¦„ì„ ì§€ì •í•˜ì„¸ìš” (ì¤‘ë³µ ë¶ˆê°€)</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="clientIP">IP ì£¼ì†Œ</label>
                        <input type="text" id="clientIP" class="form-input" placeholder="192.168.1.101" pattern="^(?:[0-9]{1,3}\.){3}[0-9]{1,3}$" required>
                        <small class="form-help">í´ë¼ì´ì–¸íŠ¸ PCì˜ ê³ ì • IP ì£¼ì†Œ</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="clientPort">í¬íŠ¸</label>
                        <input type="number" id="clientPort" class="form-input" placeholder="8081" value="8081" min="1" max="65535">
                        <small class="form-help">Python í´ë¼ì´ì–¸íŠ¸ í†µì‹  í¬íŠ¸ (ê¸°ë³¸: 8081)</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="clientDescription">ì„¤ëª… (ì„ íƒ)</label>
                        <textarea id="clientDescription" class="form-input" rows="2" placeholder="ì´ í´ë¼ì´ì–¸íŠ¸ì— ëŒ€í•œ ë©”ëª¨ (ìœ„ì¹˜, ìš©ë„ ë“±)"></textarea>
                    </div>
                    
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeAddClientModal()">ì·¨ì†Œ</button>
                        <button type="submit" class="btn btn-primary">ì¶”ê°€</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- í´ë¼ì´ì–¸íŠ¸ ìƒì„¸ ëª¨ë‹¬ -->
    <div class="modal" id="clientModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalClientName">í´ë¼ì´ì–¸íŠ¸ ê´€ë¦¬</h3>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            
            <div class="modal-body">
                <!-- ì‹œìŠ¤í…œ ì •ë³´ -->
                <div class="info-section">
                    <h4>ì‹œìŠ¤í…œ ì •ë³´</h4>
                    <div class="info-grid">
                        <div>ì´ë¦„: <strong id="modalClientNameText">-</strong></div>
                        <div>IP ì£¼ì†Œ: <strong id="modalClientIP">-</strong></div>
                        <div>í¬íŠ¸: <strong id="modalClientPort">-</strong></div>
                        <div>ìƒíƒœ: <span id="modalClientStatus" class="status-badge offline">ì˜¤í”„ë¼ì¸</span></div>
                        <div>ë§ˆì§€ë§‰ ì—°ê²°: <span id="modalLastSeen">-</span></div>
                        <div>í˜„ì¬ ì‹¤í–‰ ID: <span id="modalExecutionId">ì—†ìŒ</span></div>
                    </div>
                </div>
                
                <!-- ì„±ëŠ¥ ë©”íŠ¸ë¦­ (ì‹¤í–‰ ì¤‘ì¼ ë•Œë§Œ í‘œì‹œ) -->
                <div class="info-section" id="metricsSection" style="display: none;">
                    <h4>ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§</h4>
                    <div class="info-grid">
                        <div>CPU ì‚¬ìš©ë¥ : <span id="modalCPU">0%</span></div>
                        <div>ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥ : <span id="modalRAM">0%</span></div>
                        <div>ë””ìŠ¤í¬ ì‚¬ìš©ë¥ : <span id="modalDisk">0%</span></div>
                        <div>ë„¤íŠ¸ì›Œí¬ ì§€ì—°: <span id="modalLatency">0ms</span></div>
                        <div>ì–¸ë¦¬ì–¼ì—”ì§„ í”„ë¡œì„¸ìŠ¤: <span id="modalProcessCount">0ê°œ</span></div>
                    </div>
                </div>
                
                <!-- ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ -->
                <div class="info-section" id="processSection" style="display: none;">
                    <h4>ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤</h4>
                    <div id="modalProcessList" style="font-size: 12px; color: var(--text-muted); line-height: 1.4;">
                        ì—†ìŒ
                    </div>
                </div>
                
                <!-- ì—°ê²° íˆìŠ¤í† ë¦¬ -->
                <div class="info-section" id="historySection">
                    <h4>ì—°ê²° íˆìŠ¤í† ë¦¬ (ìµœê·¼ 5ê°œ)</h4>
                    <div class="connection-history" id="modalConnectionHistory">
                        <div class="history-item">
                            <span>ë“±ë¡ë¨</span>
                            <span id="modalRegisteredTime">-</span>
                        </div>
                    </div>
                </div>
                
                <!-- í´ë¼ì´ì–¸íŠ¸ ì œì–´ -->
                <div class="info-section">
                    <h4>í´ë¼ì´ì–¸íŠ¸ ì œì–´</h4>
                    <div class="button-group">
                        <button class="btn btn-primary" onclick="clientAction('heartbeat')" title="ìƒíƒœ í™•ì¸">
                            ğŸ’“ ìƒíƒœ í™•ì¸
                        </button>
                        <button class="btn btn-secondary" onclick="clientAction('stop_all')" title="ëª¨ë“  í”„ë¡œì„¸ìŠ¤ ì¤‘ì§€">
                            â¹ï¸ ì „ì²´ ì¤‘ì§€
                        </button>
                    </div>
                </div>
                
                <!-- ì „ì› ì œì–´ (v2.1 ê¸°ëŠ¥) -->
                <div class="info-section">
                    <h4>ì „ì› ì œì–´ (v2.1)</h4>
                    <div class="button-group">
                        <button class="btn btn-primary" onclick="powerAction('on')" title="Wake-on-LANìœ¼ë¡œ ì „ì› ì¼œê¸°" disabled>
                            ğŸ”Œ ì „ì› ì¼œê¸°
                        </button>
                        <button class="btn btn-secondary" onclick="powerAction('reboot')" title="ì›ê²© ì¬ë¶€íŒ…" disabled>
                            ğŸ”„ ì¬ë¶€íŒ…
                        </button>
                        <button class="btn btn-danger" onclick="powerAction('off')" title="ì›ê²© ì¢…ë£Œ" disabled>
                            âš¡ ì „ì› ë„ê¸°
                        </button>
                    </div>
                    <p class="warning-text">ì „ì› ì œì–´ ê¸°ëŠ¥ì€ v2.1ì—ì„œ í™œì„±í™”ë©ë‹ˆë‹¤.</p>
                </div>
                
                <!-- ìœ„í—˜ êµ¬ì—­ -->
                <div class="danger-section">
                    <h4>ìœ„í—˜ êµ¬ì—­</h4>
                    <button class="btn btn-danger" onclick="deleteClient()" title="ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì™„ì „ ì‚­ì œ">
                        ğŸ—‘ï¸ í´ë¼ì´ì–¸íŠ¸ ì‚­ì œ
                    </button>
                    <p class="warning-text">ì‚­ì œí•˜ë©´ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì™„ì „íˆ ì œê±°ë˜ë©° ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- í”„ë¦¬ì…‹ ì¶”ê°€/í¸ì§‘ ëª¨ë‹¬ -->
    <div class="modal" id="presetModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="presetModalTitle">ìƒˆ í”„ë¦¬ì…‹ ë§Œë“¤ê¸°</h3>
                <span class="close" onclick="closePresetModal()">&times;</span>
            </div>
            
            <div class="modal-body">
                <form id="presetForm">
                    <div class="form-group">
                        <label for="presetName">í”„ë¦¬ì…‹ ì´ë¦„</label>
                        <input type="text" id="presetName" class="form-input" placeholder="ì˜ˆ: ë©”ì¸ ì½˜í…ì¸ " required>
                        <small class="form-help">ì•Œì•„ë³´ê¸° ì‰¬ìš´ í”„ë¦¬ì…‹ ì´ë¦„</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="presetDescription">ì„¤ëª… (ì„ íƒ)</label>
                        <textarea id="presetDescription" class="form-input" rows="2" placeholder="í”„ë¦¬ì…‹ì— ëŒ€í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="presetCommand">ì–¸ë¦¬ì–¼ì—”ì§„ ì‹¤í–‰ ëª…ë ¹</label>
                        <textarea id="presetCommand" class="form-input" rows="6" placeholder="D:\UnrealProjects\MyProject\Windows\MyProject.exe None -messaging -dc_cluster -nosplash -dc_cfg=&quot;C:\path\to\config.ndisplay&quot; -dc_node=Node_0 -fullscreen" required></textarea>
                        <small class="form-help">ìŠ¤ìœ„ì¹˜ë³´ë“œì—ì„œ ìƒì„±ëœ ì „ì²´ ëª…ë ¹ì–´ë¥¼ ë³µì‚¬í•´ì„œ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”. ë§¤ìš° ê¸´ ëª…ë ¹ì–´ë„ ì§€ì›ë©ë‹ˆë‹¤.</small>
                    </div>
                    
                    <div class="form-group">
                        <label>ëŒ€ìƒ ê·¸ë£¹ ì„ íƒ (ë³µìˆ˜ ì„ íƒ ê°€ëŠ¥)</label>
                        <div class="checkbox-group" id="presetGroupList">
                            <!-- ê·¸ë£¹ ëª©ë¡ì´ ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                            <div style="text-align: center; padding: 20px; color: var(--text-muted);">
                                ë¨¼ì € ê·¸ë£¹ì„ ìƒì„±í•´ì£¼ì„¸ìš”
                            </div>
                        </div>
                        <small class="form-help">ì´ í”„ë¦¬ì…‹ì„ ì‹¤í–‰í•  ê·¸ë£¹ì„ ì„ íƒí•˜ì„¸ìš”. ì„ íƒí•œ ê·¸ë£¹ì˜ ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.</small>
                    </div>
                    
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" onclick="closePresetModal()">ì·¨ì†Œ</button>
                        <button type="submit" class="btn btn-primary">ì €ì¥</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- ê·¸ë£¹ ì¶”ê°€/í¸ì§‘ ëª¨ë‹¬ -->
    <div class="modal" id="groupModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="groupModalTitle">ìƒˆ ê·¸ë£¹ ë§Œë“¤ê¸°</h3>
                <span class="close" onclick="closeGroupModal()">&times;</span>
            </div>
            
            <div class="modal-body">
                <form id="groupForm">
                    <div class="form-group">
                        <label for="groupName">ê·¸ë£¹ ì´ë¦„</label>
                        <input type="text" id="groupName" class="form-input" placeholder="ì˜ˆ: ë©”ì¸ ë””ìŠ¤í”Œë ˆì´ ì›”" required>
                        <small class="form-help">ì•Œì•„ë³´ê¸° ì‰¬ìš´ ê·¸ë£¹ ì´ë¦„</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="groupDescription">ì„¤ëª… (ì„ íƒ)</label>
                        <textarea id="groupDescription" class="form-input" rows="2" placeholder="ê·¸ë£¹ì— ëŒ€í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš” (ìœ„ì¹˜, ìš©ë„ ë“±)"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>í¬í•¨í•  ë””ìŠ¤í”Œë ˆì´ ì„œë²„</label>
                        <div class="checkbox-group" id="groupClientList">
                            <!-- í´ë¼ì´ì–¸íŠ¸ ëª©ë¡ì´ ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                            <div style="text-align: center; padding: 20px; color: var(--text-muted);">
                                ë¨¼ì € í´ë¼ì´ì–¸íŠ¸ë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”
                            </div>
                        </div>
                        <small class="form-help">ê·¸ë£¹ì— í¬í•¨í•  ë””ìŠ¤í”Œë ˆì´ ì„œë²„ë¥¼ ì„ íƒí•˜ì„¸ìš”. í•œ í´ë¼ì´ì–¸íŠ¸ëŠ” ì—¬ëŸ¬ ê·¸ë£¹ì— í¬í•¨ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</small>
                    </div>
                    
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeGroupModal()">ì·¨ì†Œ</button>
                        <button type="submit" class="btn btn-primary">ì €ì¥</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- í† ìŠ¤íŠ¸ ì•Œë¦¼ -->
    <div class="toast" id="toast"></div>

    <script>
        // ==================== ì „ì—­ ìƒíƒœ ê´€ë¦¬ ====================
        let isDarkMode = false;
        let isSocketConnected = false;
        let isApiConnected = false;
        let selectedGroups = new Set();
        let selectedPresets = new Set();
        let currentClientId = null;
        let editingPresetId = null;
        let editingGroupId = null;
        let autoRefreshTimer = null;

        // ë°ì´í„° ì €ì¥ì†Œ (ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ì„œë²„ì—ì„œ ê´€ë¦¬)
        let clients = new Map();
        let groups = new Map();
        let presets = new Map();
        let executions = new Map();
        let clientHistory = new Map();

        // Socket.io ì—°ê²° (ì‹¤ì œ êµ¬í˜„ì—ì„œ í™œì„±í™”)
        // const socket = io();

        // ==================== ì´ˆê¸°í™” ====================
        window.onload = function() {
            initializeTheme();
            initializeAPI();
            initializeSocket();
            startAutoRefresh();
            updateTime();
            setInterval(updateTime, 1000);
            updateAllStats();
        };

        function initializeTheme() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                toggleDarkMode();
            }
        }

        function initializeAPI() {
            // API ì—°ê²° ìƒíƒœ ì‹œë®¬ë ˆì´ì…˜
            showApiStatus('connecting');
            
            setTimeout(() => {
                // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ì„œë²„ ping ì²´í¬
                isApiConnected = Math.random() > 0.2; // 80% í™•ë¥ ë¡œ ì—°ê²°
                showApiStatus(isApiConnected ? 'connected' : 'failed');
                
                if (isApiConnected) {
                    loadInitialData();
                }
            }, 2000);

            // ì£¼ê¸°ì  API ìƒíƒœ ì²´í¬
            setInterval(() => {
                checkApiConnection();
            }, 30000);
        }

        function initializeSocket() {
            // Socket.io ì—°ê²° ìƒíƒœ ì‹œë®¬ë ˆì´ì…˜
            setTimeout(() => {
                isSocketConnected = Math.random() > 0.1; // 90% í™•ë¥ ë¡œ ì—°ê²°
                updateSocketStatus();
                
                if (isSocketConnected) {
                    simulateRealTimeUpdates();
                }
            }, 1500);
        }

        function loadInitialData() {
            // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ì„œë²„ì—ì„œ ë°ì´í„° ë¡œë“œ
            // fetch('/api/clients').then(response => response.json()).then(data => { ... });
            showToast('ì´ˆê¸° ë°ì´í„°ë¥¼ ë¡œë“œí–ˆìŠµë‹ˆë‹¤.', 'success');
        }

        // ==================== ì‹œê°„ ë° ìë™ ìƒˆë¡œê³ ì¹¨ ====================
        function updateTime() {
            const now = new Date();
            document.getElementById('current-time').textContent = 
                now.toLocaleTimeString('ko-KR', {hour12: true, hour: '2-digit', minute: '2-digit', second: '2-digit'});
        }

        function startAutoRefresh() {
            autoRefreshTimer = setInterval(() => {
                if (isApiConnected) {
                    refreshClientsData();
                }
            }, 30000); // 30ì´ˆë§ˆë‹¤ ìë™ ìƒˆë¡œê³ ì¹¨
        }

        function refreshClientsData() {
            // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ì„œë²„ì—ì„œ í´ë¼ì´ì–¸íŠ¸ ìƒíƒœ ì—…ë°ì´íŠ¸
            console.log('í´ë¼ì´ì–¸íŠ¸ ë°ì´í„° ìë™ ìƒˆë¡œê³ ì¹¨...');
            
            // ì‹œë®¬ë ˆì´ì…˜: ëœë¤í•˜ê²Œ í´ë¼ì´ì–¸íŠ¸ ìƒíƒœ ë³€ê²½
            document.querySelectorAll('.client-item').forEach(item => {
                if (Math.random() < 0.1) { // 10% í™•ë¥ ë¡œ ìƒíƒœ ë³€ê²½
                    simulateClientStatusChange(item);
                }
            });
        }

        // ==================== API ë° Socket ìƒíƒœ ê´€ë¦¬ ====================
        function showApiStatus(status) {
            const apiStatus = document.getElementById('apiStatus');
            const indicator = document.getElementById('apiIndicator');
            const statusText = document.getElementById('apiStatusText');
            
            apiStatus.classList.add('visible');
            
            switch(status) {
                case 'connecting':
                    indicator.className = 'api-indicator disconnected';
                    statusText.textContent = 'API ì—°ê²° ì¤‘...';
                    break;
                case 'connected':
                    indicator.className = 'api-indicator connected';
                    statusText.textContent = 'API ì—°ê²°ë¨';
                    setTimeout(() => apiStatus.classList.remove('visible'), 3000);
                    break;
                case 'failed':
                    indicator.className = 'api-indicator disconnected';
                    statusText.textContent = 'API ì—°ê²° ì‹¤íŒ¨';
                    break;
            }
        }

        function checkApiConnection() {
            // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ì„œë²„ì— ping ìš”ì²­
            const wasConnected = isApiConnected;
            isApiConnected = Math.random() > 0.15; // 85% í™•ë¥ ë¡œ ì—°ê²° ìœ ì§€
            
            if (wasConnected !== isApiConnected) {
                showApiStatus(isApiConnected ? 'connected' : 'failed');
                if (!isApiConnected) {
                    showToast('API ì—°ê²°ì´ ëŠì–´ì¡ŒìŠµë‹ˆë‹¤. ì¬ì—°ê²° ì‹œë„ ì¤‘...', 'error');
                }
            }
        }

        function updateSocketStatus() {
            const indicator = document.getElementById('socketIndicator');
            const status = document.getElementById('socketStatus');
            
            if (isSocketConnected) {
                indicator.classList.remove('disconnected');
                status.textContent = 'ì—°ê²°ë¨';
                status.style.color = '#22c55e';
            } else {
                indicator.classList.add('disconnected');
                status.textContent = 'ì—°ê²° ëŠê¹€';
                status.style.color = '#ef4444';
            }
        }

        // ==================== ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ì‹œë®¬ë ˆì´ì…˜ ====================
        function simulateRealTimeUpdates() {
            // ì‹¤ì œ Socket ì´ë²¤íŠ¸ ëŒ€ì‹  ì‹œë®¬ë ˆì´ì…˜
            setInterval(() => {
                if (isSocketConnected && clients.size > 0) {
                    simulateRandomClientUpdate();
                }
            }, 15000); // 15ì´ˆë§ˆë‹¤ ëœë¤ ì—…ë°ì´íŠ¸
        }

        function simulateRandomClientUpdate() {
            const clientElements = document.querySelectorAll('.client-item');
            if (clientElements.length > 0) {
                const randomClient = clientElements[Math.floor(Math.random() * clientElements.length)];
                simulateClientStatusChange(randomClient);
            }
        }

        function simulateClientStatusChange(clientElement) {
            const clientId = clientElement.getAttribute('data-client-id');
            const currentStatus = clientElement.classList.contains('running') ? 'running' : 
                                 clientElement.classList.contains('online') ? 'online' : 'offline';
            
            let newStatus = currentStatus;
            
            // ìƒíƒœ ë³€ê²½ ë¡œì§
            if (currentStatus === 'offline' && Math.random() < 0.3) {
                newStatus = 'online';
            } else if (currentStatus === 'online' && Math.random() < 0.2) {
                newStatus = Math.random() < 0.5 ? 'running' : 'offline';
            } else if (currentStatus === 'running' && Math.random() < 0.1) {
                newStatus = 'online';
            }
            
            if (newStatus !== currentStatus) {
                updateClientStatus(clientId, newStatus);
                addClientHistory(clientId, `ìƒíƒœ ë³€ê²½: ${currentStatus} â†’ ${newStatus}`);
            }
        }

        function updateClientStatus(clientId, status) {
            const clientElement = document.querySelector(`[data-client-id="${clientId}"]`);
            if (!clientElement) return;
            
            // í´ë˜ìŠ¤ ì—…ë°ì´íŠ¸
            clientElement.className = `client-item ${status}`;
            
            // ì•„ì´ì½˜ ë° í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
            const icon = clientElement.querySelector('.client-icon');
            const statusText = clientElement.querySelector('.client-status');
            const metricsDiv = clientElement.querySelector('.client-metrics');
            
            switch(status) {
                case 'online':
                    icon.textContent = 'ğŸŸ¡';
                    statusText.textContent = 'ëŒ€ê¸° ì¤‘';
                    if (metricsDiv) metricsDiv.style.display = 'none';
                    break;
                case 'running':
                    icon.textContent = 'ğŸŸ¢';
                    statusText.textContent = 'ì–¸ë¦¬ì–¼ì—”ì§„ ì‹¤í–‰ ì¤‘';
                    if (metricsDiv) {
                        metricsDiv.style.display = 'block';
                        updateClientMetrics(clientId);
                    }
                    break;
                case 'offline':
                    icon.textContent = 'ğŸ”´';
                    statusText.textContent = 'ì˜¤í”„ë¼ì¸';
                    if (metricsDiv) metricsDiv.style.display = 'none';
                    break;
            }
            
            // ë°ì´í„° ì €ì¥ì†Œ ì—…ë°ì´íŠ¸
            if (clients.has(clientId)) {
                const client = clients.get(clientId);
                client.status = status;
                client.last_seen = new Date();
                clients.set(clientId, client);
            }
            
            updateAllStats();
        }

        function updateClientMetrics(clientId) {
            const metricsDiv = document.querySelector(`[data-client-id="${clientId}"] .client-metrics`);
            if (metricsDiv) {
                const cpu = Math.floor(Math.random() * 100);
                const ram = Math.floor(Math.random() * 100);
                const latency = Math.floor(Math.random() * 50) + 10;
                
                metricsDiv.innerHTML = `
                    CPU: ${cpu}%<br>
                    RAM: ${ram}%<br>
                    ì§€ì—°: ${latency}ms
                `;
            }
        }

        function addClientHistory(clientId, event) {
            if (!clientHistory.has(clientId)) {
                clientHistory.set(clientId, []);
            }
            
            const history = clientHistory.get(clientId);
            history.unshift({
                event: event,
                timestamp: new Date()
            });
            
            // ìµœëŒ€ 10ê°œ ê¸°ë¡ë§Œ ìœ ì§€
            if (history.length > 10) {
                history.splice(10);
            }
            
            clientHistory.set(clientId, history);
        }

        // ==================== í…Œë§ˆ ê´€ë¦¬ ====================
        function toggleDarkMode() {
            isDarkMode = !isDarkMode;
            const body = document.body;
            const themeToggle = document.getElementById('themeToggle');
            
            if (isDarkMode) {
                body.setAttribute('data-theme', 'dark');
                themeToggle.textContent = 'â˜€ï¸';
                localStorage.setItem('theme', 'dark');
                showToast('ë‹¤í¬ ëª¨ë“œê°€ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
            } else {
                body.removeAttribute('data-theme');
                themeToggle.textContent = 'ğŸŒ™';
                localStorage.setItem('theme', 'light');
                showToast('ë¼ì´íŠ¸ ëª¨ë“œê°€ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
            }
        }

        // ==================== í†µê³„ ì—…ë°ì´íŠ¸ ====================
        function updateAllStats() {
            const runningClients = document.querySelectorAll('.client-item.running').length;
            const onlineClients = document.querySelectorAll('.client-item.online, .client-item.running').length;
            const totalClients = document.querySelectorAll('.client-item').length;
            const totalGroups = document.querySelectorAll('.group-card').length;
            const totalPresets = document.querySelectorAll('.preset-card').length;
            const activeExecutionsCount = document.querySelectorAll('.execution-item .execution-status.running').length;
            
            document.getElementById('totalClients').textContent = totalClients;
            document.getElementById('runningClients').textContent = runningClients;
            document.getElementById('onlineClients').textContent = onlineClients;
            document.getElementById('activeExecutions').textContent = activeExecutionsCount;
            document.getElementById('totalGroups').textContent = totalGroups;
            document.getElementById('connectedCount').textContent = onlineClients;
            
            // ë¹ˆ ìƒíƒœ ë©”ì‹œì§€ ê´€ë¦¬
            updateEmptyStates();
        }

        function updateEmptyStates() {
            const presetGrid = document.getElementById('presetGrid');
            const groupGrid = document.getElementById('groupGrid');
            const clientGrid = document.getElementById('clientGrid');
            
            // í”„ë¦¬ì…‹ ë¹ˆ ìƒíƒœ
            const presetCards = presetGrid.querySelectorAll('.preset-card');
            const presetEmpty = presetGrid.querySelector('[style*="grid-column"]');
            if (presetCards.length === 0 && !presetEmpty) {
                presetGrid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: var(--text-muted);">
                        <div style="font-size: 48px; margin-bottom: 16px;">ğŸ“</div>
                        <div style="font-size: 14px; margin-bottom: 8px;">ì•„ì§ ìƒì„±ëœ í”„ë¦¬ì…‹ì´ ì—†ìŠµë‹ˆë‹¤</div>
                        <div style="font-size: 12px;">ìƒˆ í”„ë¦¬ì…‹ ë²„íŠ¼ì„ í´ë¦­í•´ì„œ ì²« ë²ˆì§¸ í”„ë¦¬ì…‹ì„ ë§Œë“¤ì–´ë³´ì„¸ìš”!</div>
                    </div>
                `;
            } else if (presetCards.length > 0 && presetEmpty) {
                presetEmpty.remove();
            }
            
            // ê·¸ë£¹ ë¹ˆ ìƒíƒœ
            const groupCards = groupGrid.querySelectorAll('.group-card');
            const groupEmpty = groupGrid.querySelector('[style*="grid-column"]');
            if (groupCards.length === 0 && !groupEmpty) {
                groupGrid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: var(--text-muted);">
                        <div style="font-size: 48px; margin-bottom: 16px;">ğŸ‘¥</div>
                        <div style="font-size: 14px; margin-bottom: 8px;">ì•„ì§ ìƒì„±ëœ ê·¸ë£¹ì´ ì—†ìŠµë‹ˆë‹¤</div>
                        <div style="font-size: 12px;">ìƒˆ ê·¸ë£¹ ë²„íŠ¼ì„ í´ë¦­í•´ì„œ ì²« ë²ˆì§¸ ê·¸ë£¹ì„ ë§Œë“¤ì–´ë³´ì„¸ìš”!</div>
                    </div>
                `;
            } else if (groupCards.length > 0 && groupEmpty) {
                groupEmpty.remove();
            }
            
            // í´ë¼ì´ì–¸íŠ¸ ë¹ˆ ìƒíƒœ
            const clientItems = clientGrid.querySelectorAll('.client-item');
            const clientEmpty = clientGrid.querySelector('[style*="grid-column"]');
            if (clientItems.length === 0 && !clientEmpty) {
                clientGrid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: var(--text-muted);">
                        <div style="font-size: 48px; margin-bottom: 16px;">ğŸ–¥ï¸</div>
                        <div style="font-size: 14px; margin-bottom: 8px;">ì—°ê²°ëœ ë””ìŠ¤í”Œë ˆì´ ì„œë²„ê°€ ì—†ìŠµë‹ˆë‹¤</div>
                        <div style="font-size: 12px;">í´ë¼ì´ì–¸íŠ¸ ì¶”ê°€ ë²„íŠ¼ì„ í´ë¦­í•˜ê±°ë‚˜ Python í´ë¼ì´ì–¸íŠ¸ê°€ ì—°ê²°ë˜ë©´ ìë™ìœ¼ë¡œ ë‚˜íƒ€ë‚©ë‹ˆë‹¤</div>
                    </div>
                `;
            } else if (clientItems.length > 0 && clientEmpty) {
                clientEmpty.remove();
            }
        }

        // ==================== í´ë¼ì´ì–¸íŠ¸ ê´€ë¦¬ ====================
        function showAddClientModal() {
            document.getElementById('addClientModal').style.display = 'flex';
            document.getElementById('addClientForm').reset();
        }

        function closeAddClientModal() {
            document.getElementById('addClientModal').style.display = 'none';
        }

        // í´ë¼ì´ì–¸íŠ¸ ì¶”ê°€ í¼ ì œì¶œ
        document.getElementById('addClientForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('clientName').value.trim();
            const ip = document.getElementById('clientIP').value.trim();
            const port = parseInt(document.getElementById('clientPort').value) || 8081;
            const description = document.getElementById('clientDescription').value.trim();
            
            // ì¤‘ë³µ ì²´í¬
            const existingNames = Array.from(clients.values()).map(c => c.name);
            const existingIPs = Array.from(clients.values()).map(c => c.ip_address);
            
            if (existingNames.includes(name)) {
                showToast('ì´ë¯¸ ì¡´ì¬í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ì´ë¦„ì…ë‹ˆë‹¤.', 'error');
                return;
            }
            
            if (existingIPs.includes(ip)) {
                showToast('ì´ë¯¸ ë“±ë¡ëœ IP ì£¼ì†Œì…ë‹ˆë‹¤.', 'error');
                return;
            }
            
            // ìƒˆ í´ë¼ì´ì–¸íŠ¸ ìƒì„±
            const clientId = `client_${Date.now()}`;
            const newClient = {
                id: clientId,
                name: name,
                ip_address: ip,
                port: port,
                description: description,
                status: 'offline',
                created_at: new Date(),
                last_seen: null
            };
            
            clients.set(clientId, newClient);
            addClientToDOM(newClient);
            addClientHistory(clientId, 'í´ë¼ì´ì–¸íŠ¸ ë“±ë¡ë¨');
            
            // ë“±ë¡ í›„ ì—°ê²° í™•ì¸ ì‹œë®¬ë ˆì´ì…˜
            setTimeout(() => {
                verifyClientConnection(clientId);
            }, 2000);
            
            updateGroupClientList();
            updateAllStats();
            closeAddClientModal();
            
            showToast(`í´ë¼ì´ì–¸íŠ¸ "${name}"ì´(ê°€) ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤. ì—°ê²°ì„ í™•ì¸í•˜ê³  ìˆìŠµë‹ˆë‹¤...`, 'success');
        });

        function addClientToDOM(client) {
            const clientGrid = document.getElementById('clientGrid');
            
            // ë¹ˆ ìƒíƒœ ë©”ì‹œì§€ ì œê±°
            const emptyMessage = clientGrid.querySelector('[style*="grid-column"]');
            if (emptyMessage) {
                emptyMessage.remove();
            }
            
            const clientElement = document.createElement('div');
            clientElement.className = 'client-item offline';
            clientElement.setAttribute('data-client-id', client.id);
            clientElement.onclick = () => showClientModal(client.id);
            
            clientElement.innerHTML = `
                <div class="client-icon">ğŸ”´</div>
                <div class="client-name">${client.name}</div>
                <div class="client-ip">${client.ip_address}</div>
                <div class="client-status">ì˜¤í”„ë¼ì¸</div>
                <div class="client-metrics" style="display: none;">
                    CPU: 0%<br>RAM: 0%<br>ì§€ì—°: 0ms
                </div>
            `;
            
            clientGrid.appendChild(clientElement);
        }

        function verifyClientConnection(clientId) {
            // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ping ìš”ì²­
            const success = Math.random() > 0.3; // 70% í™•ë¥ ë¡œ ì„±ê³µ
            
            if (success) {
                updateClientStatus(clientId, 'online');
                const client = clients.get(clientId);
                showToast(`í´ë¼ì´ì–¸íŠ¸ "${client.name}"ì´(ê°€) ì—°ê²°ë˜ì—ˆìŠµë‹ˆë‹¤!`, 'success');
                addClientHistory(clientId, 'ì—°ê²° í™•ì¸ë¨');
            } else {
                const client = clients.get(clientId);
                showToast(`í´ë¼ì´ì–¸íŠ¸ "${client.name}"ì´(ê°€) ì‘ë‹µí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.`, 'warning');
                addClientHistory(clientId, 'ì—°ê²° ì‹¤íŒ¨ - ì‘ë‹µ ì—†ìŒ');
            }
        }

        function showClientModal(clientId) {
            currentClientId = clientId;
            const client = clients.get(clientId);
            
            if (!client) return;
            
            // ê¸°ë³¸ ì •ë³´ ì„¤ì •
            document.getElementById('modalClientName').textContent = `${client.name} ê´€ë¦¬`;
            document.getElementById('modalClientNameText').textContent = client.name;
            document.getElementById('modalClientIP').textContent = client.ip_address;
            document.getElementById('modalClientPort').textContent = client.port;
            document.getElementById('modalLastSeen').textContent = client.last_seen ? 
                formatRelativeTime(client.last_seen) : 'ì—°ê²°ëœ ì  ì—†ìŒ';
            document.getElementById('modalRegisteredTime').textContent = 
                formatRelativeTime(client.created_at);
            
            // ìƒíƒœ ë±ƒì§€ ì—…ë°ì´íŠ¸
            const statusBadge = document.getElementById('modalClientStatus');
            statusBadge.className = `status-badge ${client.status}`;
            statusBadge.textContent = getStatusText(client.status);
            
            // ì‹¤í–‰ ID ì„¤ì • (ì‹¤í–‰ ì¤‘ì¼ ë•Œë§Œ)
            const executionIdElement = document.getElementById('modalExecutionId');
            if (client.status === 'running') {
                executionIdElement.textContent = `exec_${clientId}_${Date.now().toString().slice(-6)}`;
            } else {
                executionIdElement.textContent = 'ì—†ìŒ';
            }
            
            // ì„±ëŠ¥ ë©”íŠ¸ë¦­ ì„¹ì…˜
            const metricsSection = document.getElementById('metricsSection');
            const processSection = document.getElementById('processSection');
            
            if (client.status === 'running') {
                metricsSection.style.display = 'block';
                processSection.style.display = 'block';
                
                // ë”ë¯¸ ë©”íŠ¸ë¦­ ë°ì´í„°
                document.getElementById('modalCPU').textContent = Math.floor(Math.random() * 100) + '%';
                document.getElementById('modalRAM').textContent = Math.floor(Math.random() * 100) + '%';
                document.getElementById('modalDisk').textContent = Math.floor(Math.random() * 100) + '%';
                document.getElementById('modalLatency').textContent = Math.floor(Math.random() * 50) + 10 + 'ms';
                document.getElementById('modalProcessCount').textContent = Math.floor(Math.random() * 3) + 1 + 'ê°œ';
                
                document.getElementById('modalProcessList').innerHTML = `
                    UnrealEngine-Win64-Shipping.exe (PID: ${Math.floor(Math.random() * 10000) + 1000})<br>
                    nDisplayLauncher.exe (PID: ${Math.floor(Math.random() * 10000) + 1000})<br>
                    ${Math.random() > 0.5 ? `nDisplayListener.exe (PID: ${Math.floor(Math.random() * 10000) + 1000})` : ''}
                `;
            } else {
                metricsSection.style.display = 'none';
                processSection.style.display = 'none';
            }
            
            // ì—°ê²° íˆìŠ¤í† ë¦¬ ì—…ë°ì´íŠ¸
            updateModalConnectionHistory(clientId);
            
            document.getElementById('clientModal').style.display = 'flex';
        }

        function updateModalConnectionHistory(clientId) {
            const historyContainer = document.getElementById('modalConnectionHistory');
            const history = clientHistory.get(clientId) || [];
            
            historyContainer.innerHTML = `
                <div class="history-item">
                    <span>ë“±ë¡ë¨</span>
                    <span>${formatRelativeTime(clients.get(clientId).created_at)}</span>
                </div>
                ${history.slice(0, 4).map(item => `
                    <div class="history-item">
                        <span>${item.event}</span>
                        <span>${formatRelativeTime(item.timestamp)}</span>
                    </div>
                `).join('')}
            `;
        }

        function formatRelativeTime(date) {
            const now = new Date();
            const diff = now - date;
            const minutes = Math.floor(diff / 60000);
            const hours = Math.floor(minutes / 60);
            const days = Math.floor(hours / 24);
            
            if (minutes < 1) return 'ë°©ê¸ˆ ì „';
            if (minutes < 60) return `${minutes}ë¶„ ì „`;
            if (hours < 24) return `${hours}ì‹œê°„ ì „`;
            return `${days}ì¼ ì „`;
        }

        function getStatusText(status) {
            const statusTexts = {
                'online': 'ì˜¨ë¼ì¸',
                'running': 'ì‹¤í–‰ ì¤‘',
                'offline': 'ì˜¤í”„ë¼ì¸'
            };
            return statusTexts[status] || status;
        }

        function closeModal() {
            document.getElementById('clientModal').style.display = 'none';
            currentClientId = null;
        }

        function clientAction(action) {
            const client = clients.get(currentClientId);
            if (!client) return;
            
            switch(action) {
                case 'heartbeat':
                    showToast(`"${client.name}"ì— ìƒíƒœ í™•ì¸ ìš”ì²­ì„ ì „ì†¡í–ˆìŠµë‹ˆë‹¤.`, 'info');
                    // ì‹¤ì œ êµ¬í˜„: socket.emit('client_heartbeat_request', { clientId: currentClientId });
                    break;
                case 'stop_all':
                    if (client.status === 'running') {
                        updateClientStatus(currentClientId, 'online');
                        showToast(`"${client.name}"ì˜ ëª¨ë“  í”„ë¡œì„¸ìŠ¤ ì¤‘ì§€ ëª…ë ¹ì„ ì „ì†¡í–ˆìŠµë‹ˆë‹¤.`, 'success');
                        addClientHistory(currentClientId, 'ëª¨ë“  í”„ë¡œì„¸ìŠ¤ ì¤‘ì§€ë¨');
                        updateModalConnectionHistory(currentClientId);
                    } else {
                        showToast('ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ê°€ ì—†ìŠµë‹ˆë‹¤.', 'warning');
                    }
                    break;
            }
        }

        function powerAction(action) {
            const actionNames = {
                'on': 'ì¼œê¸°',
                'reboot': 'ì¬ë¶€íŒ…',
                'off': 'ë„ê¸°'
            };
            showToast(`ì „ì› ${actionNames[action]} ê¸°ëŠ¥ì€ v2.1ì—ì„œ í™œì„±í™”ë©ë‹ˆë‹¤.`, 'info');
        }

        function deleteClient() {
            const client = clients.get(currentClientId);
            if (!client) return;
            
            if (confirm(`ì •ë§ "${client.name}" í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì‹¤í–‰ ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ëŠ” ìë™ìœ¼ë¡œ ì¤‘ì§€ë©ë‹ˆë‹¤.`)) {
                // DOMì—ì„œ ì œê±°
                const clientElement = document.querySelector(`[data-client-id="${currentClientId}"]`);
                if (clientElement) {
                    clientElement.remove();
                }
                
                // ë°ì´í„°ì—ì„œ ì œê±°
                clients.delete(currentClientId);
                clientHistory.delete(currentClientId);
                
                // ì„ íƒëœ í•­ëª©ì—ì„œ ì œê±°
                selectedGroups.delete(currentClientId);
                
                updateGroupClientList();
                updateAllStats();
                closeModal();
                
                showToast(`í´ë¼ì´ì–¸íŠ¸ "${client.name}"ì´(ê°€) ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`, 'error');
            }
        }

        // ==================== ê·¸ë£¹ ê´€ë¦¬ ====================
        function showAddGroupModal() {
            editingGroupId = null;
            document.getElementById('groupModalTitle').textContent = 'ìƒˆ ê·¸ë£¹ ë§Œë“¤ê¸°';
            document.getElementById('groupForm').reset();
            updateGroupClientList();
            document.getElementById('groupModal').style.display = 'flex';
        }

        function editGroup(groupId) {
            editingGroupId = groupId;
            document.getElementById('groupModalTitle').textContent = 'ê·¸ë£¹ í¸ì§‘';
            
            const group = groups.get(groupId);
            if (group) {
                document.getElementById('groupName').value = group.name;
                document.getElementById('groupDescription').value = group.description || '';
                
                updateGroupClientList();
                
                // ê¸°ì¡´ ì„ íƒëœ í´ë¼ì´ì–¸íŠ¸ ì²´í¬
                group.client_ids.forEach(clientId => {
                    const checkbox = document.querySelector(`input[name="groupClients"][value="${clientId}"]`);
                    if (checkbox) checkbox.checked = true;
                });
            }
            
            document.getElementById('groupModal').style.display = 'flex';
        }

        function closeGroupModal() {
            document.getElementById('groupModal').style.display = 'none';
            document.getElementById('groupForm').reset();
            editingGroupId = null;
        }

        function updateGroupClientList() {
            const clientList = document.getElementById('groupClientList');
            
            if (clients.size === 0) {
                clientList.innerHTML = `
                    <div style="text-align: center; padding: 20px; color: var(--text-muted);">
                        ë¨¼ì € í´ë¼ì´ì–¸íŠ¸ë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”
                    </div>
                `;
                return;
            }
            
            clientList.innerHTML = '';
            clients.forEach((client, clientId) => {
                const label = document.createElement('label');
                label.className = 'checkbox-label';
                label.innerHTML = `
                    <input type="checkbox" name="groupClients" value="${clientId}">
                    <span>${client.name} (${client.ip_address})</span>
                `;
                clientList.appendChild(label);
            });
        }

        // ê·¸ë£¹ í¼ ì œì¶œ ì²˜ë¦¬
        document.getElementById('groupForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('groupName').value.trim();
            const description = document.getElementById('groupDescription').value.trim();
            const selectedClients = Array.from(document.querySelectorAll('input[name="groupClients"]:checked'))
                .map(cb => cb.value);
            
            if (selectedClients.length === 0) {
                showToast('ìµœì†Œ í•˜ë‚˜ ì´ìƒì˜ ë””ìŠ¤í”Œë ˆì´ ì„œë²„ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.', 'error');
                return;
            }
            
            // ì¤‘ë³µ ì´ë¦„ ì²´í¬
            const existingNames = Array.from(groups.values()).map(g => g.name);
            if (!editingGroupId && existingNames.includes(name)) {
                showToast('ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ê·¸ë£¹ ì´ë¦„ì…ë‹ˆë‹¤.', 'error');
                return;
            }
            
            if (editingGroupId) {
                // ê·¸ë£¹ ìˆ˜ì •
                const group = groups.get(editingGroupId);
                group.name = name;
                group.description = description;
                group.client_ids = selectedClients;
                groups.set(editingGroupId, group);
                
                updateGroupInDOM(group);
                showToast(`ê·¸ë£¹ "${name}"ì´(ê°€) ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.`, 'success');
            } else {
                // ìƒˆ ê·¸ë£¹ ìƒì„±
                const groupId = `group_${Date.now()}`;
                const newGroup = {
                    id: groupId,
                    name: name,
                    description: description,
                    client_ids: selectedClients,
                    created_at: new Date()
                };
                
                groups.set(groupId, newGroup);
                addGroupToDOM(newGroup);
                showToast(`ìƒˆ ê·¸ë£¹ "${name}"ì´(ê°€) ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.`, 'success');
            }
            
            updatePresetGroupList();
            updateAllStats();
            closeGroupModal();
        });

        function addGroupToDOM(group) {
            const groupGrid = document.getElementById('groupGrid');
            
            // ë¹ˆ ìƒíƒœ ë©”ì‹œì§€ ì œê±°
            const emptyMessage = groupGrid.querySelector('[style*="grid-column"]');
            if (emptyMessage) {
                emptyMessage.remove();
            }
            
            const groupElement = document.createElement('div');
            groupElement.className = 'group-card';
            groupElement.innerHTML = createGroupCardHTML(group);
            
            groupGrid.appendChild(groupElement);
        }

        function updateGroupInDOM(group) {
            const groupCard = document.querySelector(`[data-group-id="${group.id}"]`).closest('.group-card');
            if (groupCard) {
                groupCard.innerHTML = createGroupCardHTML(group);
            }
        }

        function createGroupCardHTML(group) {
            const clientTags = group.client_ids.map(clientId => {
                const client = clients.get(clientId);
                return client ? `<span class="client-tag">${client.ip_address}</span>` : '';
            }).join('');
            
            return `
                <input type="checkbox" class="group-checkbox" data-group-id="${group.id}" onclick="event.stopPropagation()" onchange="updateSelectedGroupCount()">
                <div class="group-content">
                    <div class="group-name">${group.name}</div>
                    <div class="group-info">${group.client_ids.length}ê°œ ë””ìŠ¤í”Œë ˆì´ ì„œë²„</div>
                    <div class="group-clients">
                        ${clientTags}
                    </div>
                </div>
                <div class="group-actions">
                    <button class="btn btn-secondary" onclick="editGroup('${group.id}')" title="í¸ì§‘">âœï¸</button>
                    <button class="btn btn-danger" onclick="deleteGroup('${group.id}')" title="ì‚­ì œ">ğŸ—‘ï¸</button>
                </div>
            `;
        }

        function deleteGroup(groupId) {
            const group = groups.get(groupId);
            if (!group) return;
            
            if (confirm(`ì •ë§ "${group.name}" ê·¸ë£¹ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nê·¸ë£¹ë§Œ ì‚­ì œë˜ê³  í´ë¼ì´ì–¸íŠ¸ëŠ” ìœ ì§€ë©ë‹ˆë‹¤.`)) {
                // DOMì—ì„œ ì œê±°
                const groupCard = document.querySelector(`[data-group-id="${groupId}"]`).closest('.group-card');
                if (groupCard) {
                    groupCard.remove();
                }
                
                // ë°ì´í„°ì—ì„œ ì œê±°
                groups.delete(groupId);
                
                // ì„ íƒëœ í•­ëª©ì—ì„œ ì œê±°
                selectedGroups.delete(groupId);
                updateSelectedGroupCount();
                
                updatePresetGroupList();
                updateAllStats();
                
                showToast(`ê·¸ë£¹ "${group.name}"ì´(ê°€) ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`, 'error');
            }
        }

        // ==================== í”„ë¦¬ì…‹ ê´€ë¦¬ ====================
        function showAddPresetModal() {
            editingPresetId = null;
            document.getElementById('presetModalTitle').textContent = 'ìƒˆ í”„ë¦¬ì…‹ ë§Œë“¤ê¸°';
            document.getElementById('presetForm').reset();
            updatePresetGroupList();
            document.getElementById('presetModal').style.display = 'flex';
        }

        function editPreset(presetId) {
            editingPresetId = presetId;
            document.getElementById('presetModalTitle').textContent = 'í”„ë¦¬ì…‹ í¸ì§‘';
            
            const preset = presets.get(presetId);
            if (preset) {
                document.getElementById('presetName').value = preset.name;
                document.getElementById('presetDescription').value = preset.description || '';
                document.getElementById('presetCommand').value = preset.command;
                
                updatePresetGroupList();
                
                // ê¸°ì¡´ ì„ íƒëœ ê·¸ë£¹ ì²´í¬
                preset.group_ids.forEach(groupId => {
                    const checkbox = document.querySelector(`input[name="presetGroups"][value="${groupId}"]`);
                    if (checkbox) checkbox.checked = true;
                });
            }
            
            document.getElementById('presetModal').style.display = 'flex';
        }

        function closePresetModal() {
            document.getElementById('presetModal').style.display = 'none';
            document.getElementById('presetForm').reset();
            editingPresetId = null;
        }

        function updatePresetGroupList() {
            const groupList = document.getElementById('presetGroupList');
            
            if (groups.size === 0) {
                groupList.innerHTML = `
                    <div style="text-align: center; padding: 20px; color: var(--text-muted);">
                        ë¨¼ì € ê·¸ë£¹ì„ ìƒì„±í•´ì£¼ì„¸ìš”
                    </div>
                `;
                return;
            }
            
            groupList.innerHTML = '';
            groups.forEach((group, groupId) => {
                const label = document.createElement('label');
                label.className = 'checkbox-label';
                label.innerHTML = `
                    <input type="checkbox" name="presetGroups" value="${groupId}">
                    <span>${group.name} (${group.client_ids.length}ê°œ í´ë¼ì´ì–¸íŠ¸)</span>
                `;
                groupList.appendChild(label);
            });
        }

        // í”„ë¦¬ì…‹ í¼ ì œì¶œ ì²˜ë¦¬
        document.getElementById('presetForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('presetName').value.trim();
            const description = document.getElementById('presetDescription').value.trim();
            const command = document.getElementById('presetCommand').value.trim();
            const selectedGroups = Array.from(document.querySelectorAll('input[name="presetGroups"]:checked'))
                .map(cb => cb.value);
            
            if (selectedGroups.length === 0) {
                showToast('ìµœì†Œ í•˜ë‚˜ ì´ìƒì˜ ê·¸ë£¹ì„ ì„ íƒí•´ì£¼ì„¸ìš”.', 'error');
                return;
            }
            
            // ì¤‘ë³µ ì´ë¦„ ì²´í¬
            const existingNames = Array.from(presets.values()).map(p => p.name);
            if (!editingPresetId && existingNames.includes(name)) {
                showToast('ì´ë¯¸ ì¡´ì¬í•˜ëŠ” í”„ë¦¬ì…‹ ì´ë¦„ì…ë‹ˆë‹¤.', 'error');
                return;
            }
            
            if (editingPresetId) {
                // í”„ë¦¬ì…‹ ìˆ˜ì •
                const preset = presets.get(editingPresetId);
                preset.name = name;
                preset.description = description;
                preset.command = command;
                preset.group_ids = selectedGroups;
                presets.set(editingPresetId, preset);
                
                updatePresetInDOM(preset);
                showToast(`í”„ë¦¬ì…‹ "${name}"ì´(ê°€) ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.`, 'success');
            } else {
                // ìƒˆ í”„ë¦¬ì…‹ ìƒì„±
                const presetId = `preset_${Date.now()}`;
                const newPreset = {
                    id: presetId,
                    name: name,
                    description: description,
                    command: command,
                    group_ids: selectedGroups,
                    created_at: new Date(),
                    is_active: false
                };
                
                presets.set(presetId, newPreset);
                addPresetToDOM(newPreset);
                showToast(`ìƒˆ í”„ë¦¬ì…‹ "${name}"ì´(ê°€) ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.`, 'success');
            }
            
            updateAllStats();
            closePresetModal();
        });

        function addPresetToDOM(preset) {
            const presetGrid = document.getElementById('presetGrid');
            
            // ë¹ˆ ìƒíƒœ ë©”ì‹œì§€ ì œê±°
            const emptyMessage = presetGrid.querySelector('[style*="grid-column"]');
            if (emptyMessage) {
                emptyMessage.remove();
            }
            
            const presetElement = document.createElement('div');
            presetElement.className = 'preset-card';
            presetElement.id = `preset-${preset.id}`;
            presetElement.innerHTML = createPresetCardHTML(preset);
            
            presetGrid.appendChild(presetElement);
        }

        function updatePresetInDOM(preset) {
            const presetCard = document.getElementById(`preset-${preset.id}`);
            if (presetCard) {
                presetCard.innerHTML = createPresetCardHTML(preset);
            }
        }

        function createPresetCardHTML(preset) {
            const groupNames = preset.group_ids.map(groupId => {
                const group = groups.get(groupId);
                return group ? group.name : 'ì‚­ì œëœ ê·¸ë£¹';
            }).join(', ');
            
            return `
                <input type="checkbox" class="preset-checkbox" data-preset-id="${preset.id}" onclick="event.stopPropagation()" onchange="updateSelectedPresetCount()">
                <div class="preset-content">
                    <div class="preset-name">${preset.name}</div>
                    ${preset.description ? `<div class="preset-info">${preset.description}</div>` : ''}
                    <div class="preset-info">ê·¸ë£¹: ${groupNames}</div>
                    <div class="preset-info">${preset.group_ids.length}ê°œ ê·¸ë£¹, ${getTotalClientsInGroups(preset.group_ids)}ëŒ€ í´ë¼ì´ì–¸íŠ¸</div>
                </div>
                <div class="preset-actions">
                    <button class="btn btn-primary" onclick="executePreset('${preset.id}')" title="ì‹¤í–‰">â–¶ï¸</button>
                    <button class="btn btn-secondary" onclick="editPreset('${preset.id}')" title="í¸ì§‘">âœï¸</button>
                    <button class="btn btn-danger" onclick="deletePreset('${preset.id}')" title="ì‚­ì œ">ğŸ—‘ï¸</button>
                </div>
            `;
        }

        function getTotalClientsInGroups(groupIds) {
            const clientSet = new Set();
            groupIds.forEach(groupId => {
                const group = groups.get(groupId);
                if (group) {
                    group.client_ids.forEach(clientId => clientSet.add(clientId));
                }
            });
            return clientSet.size;
        }

        function executePreset(presetId) {
            const preset = presets.get(presetId);
            if (!preset) return;
            
            // ëŒ€ìƒ í´ë¼ì´ì–¸íŠ¸ ìˆ˜ì§‘
            const targetClients = new Set();
            preset.group_ids.forEach(groupId => {
                const group = groups.get(groupId);
                if (group) {
                    group.client_ids.forEach(clientId => {
                        const client = clients.get(clientId);
                        if (client && client.status !== 'offline') {
                            targetClients.add(clientId);
                        }
                    });
                }
            });
            
            if (targetClients.size === 0) {
                showToast('ì‹¤í–‰ ê°€ëŠ¥í•œ ì˜¨ë¼ì¸ í´ë¼ì´ì–¸íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.', 'error');
                return;
            }
            
            // ì‹¤í–‰ ê¸°ë¡ ìƒì„±
            const executionId = `exec_${Date.now()}`;
            const execution = {
                id: executionId,
                preset_id: presetId,
                preset_name: preset.name,
                target_clients: Array.from(targetClients),
                status: 'running',
                started_at: new Date(),
                completed_at: null,
                results: {}
            };
            
            // ê° í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‹¤í–‰ ì¤‘ ìƒíƒœë¡œ ë³€ê²½
            targetClients.forEach(clientId => {
                updateClientStatus(clientId, 'running');
                execution.results[clientId] = 'running';
                addClientHistory(clientId, `í”„ë¦¬ì…‹ ì‹¤í–‰: ${preset.name}`);
                
                // ì‹¤í–‰ ID í‘œì‹œ
                const clientElement = document.querySelector(`[data-client-id="${clientId}"]`);
                if (clientElement) {
                    let execIdElement = clientElement.querySelector('.execution-id');
                    if (!execIdElement) {
                        execIdElement = document.createElement('div');
                        execIdElement.className = 'execution-id';
                        clientElement.appendChild(execIdElement);
                    }
                    execIdElement.textContent = executionId.slice(-6);
                }
            });
            
            // í”„ë¦¬ì…‹ ì¹´ë“œ í™œì„±í™”
            const presetCard = document.getElementById(`preset-${presetId}`);
            presetCard.classList.add('active');
            preset.is_active = true;
            presets.set(presetId, preset);
            
            executions.set(executionId, execution);
            addExecutionToHistory(execution);
            
            showToast(`í”„ë¦¬ì…‹ "${preset.name}"ì´(ê°€) ${targetClients.size}ê°œ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì‹¤í–‰ë˜ì—ˆìŠµë‹ˆë‹¤.`, 'success');
            
            // ì‹¤í–‰ ì™„ë£Œ ì‹œë®¬ë ˆì´ì…˜ (10-30ì´ˆ í›„)
            setTimeout(() => {
                completeExecution(executionId);
            }, Math.random() * 20000 + 10000);
            
            updateAllStats();
        }

        function completeExecution(executionId) {
            const execution = executions.get(executionId);
            if (!execution) return;
            
            execution.status = 'completed';
            execution.completed_at = new Date();
            
            // í´ë¼ì´ì–¸íŠ¸ë“¤ì„ ì˜¨ë¼ì¸ ìƒíƒœë¡œ ë³€ê²½
            execution.target_clients.forEach(clientId => {
                execution.results[clientId] = Math.random() > 0.1 ? 'success' : 'failed';
                updateClientStatus(clientId, 'online');
                addClientHistory(clientId, `í”„ë¦¬ì…‹ ì™„ë£Œ: ${execution.results[clientId]}`);
                
                // ì‹¤í–‰ ID ì œê±°
                const clientElement = document.querySelector(`[data-client-id="${clientId}"]`);
                if (clientElement) {
                    const execIdElement = clientElement.querySelector('.execution-id');
                    if (execIdElement) {
                        execIdElement.remove();
                    }
                }
            });
            
            // í”„ë¦¬ì…‹ ì¹´ë“œ ë¹„í™œì„±í™”
            const presetCard = document.getElementById(`preset-${execution.preset_id}`);
            if (presetCard) {
                presetCard.classList.remove('active');
            }
            
            const preset = presets.get(execution.preset_id);
            if (preset) {
                preset.is_active = false;
                presets.set(execution.preset_id, preset);
            }
            
            executions.set(executionId, execution);
            updateExecutionInHistory(execution);
            
            const successCount = Object.values(execution.results).filter(r => r === 'success').length;
            const failedCount = Object.values(execution.results).filter(r => r === 'failed').length;
            
            showToast(`í”„ë¦¬ì…‹ ì‹¤í–‰ ì™„ë£Œ: ì„±ê³µ ${successCount}ê°œ, ì‹¤íŒ¨ ${failedCount}ê°œ`, 
                     failedCount === 0 ? 'success' : 'warning');
            
            updateAllStats();
        }

        function deletePreset(presetId) {
            const preset = presets.get(presetId);
            if (!preset) return;
            
            if (confirm(`ì •ë§ "${preset.name}" í”„ë¦¬ì…‹ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì‹¤í–‰ ì¤‘ì¸ ê²½ìš° ìë™ìœ¼ë¡œ ì¤‘ì§€ë©ë‹ˆë‹¤.`)) {
                // ì‹¤í–‰ ì¤‘ì´ë©´ ì¤‘ì§€
                if (preset.is_active) {
                    stopActiveExecutions(presetId);
                }
                
                // DOMì—ì„œ ì œê±°
                const presetCard = document.getElementById(`preset-${presetId}`);
                if (presetCard) {
                    presetCard.remove();
                }
                
                // ë°ì´í„°ì—ì„œ ì œê±°
                presets.delete(presetId);
                
                // ì„ íƒëœ í•­ëª©ì—ì„œ ì œê±°
                selectedPresets.delete(presetId);
                updateSelectedPresetCount();
                
                updateAllStats();
                
                showToast(`í”„ë¦¬ì…‹ "${preset.name}"ì´(ê°€) ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`, 'error');
            }
        }

        function stopActiveExecutions(presetId) {
            const activeExecutions = Array.from(executions.values()).filter(exec => 
                exec.preset_id === presetId && exec.status === 'running'
            );
            
            activeExecutions.forEach(execution => {
                execution.status = 'cancelled';
                execution.completed_at = new Date();
                
                execution.target_clients.forEach(clientId => {
                    execution.results[clientId] = 'cancelled';
                    updateClientStatus(clientId, 'online');
                    addClientHistory(clientId, 'í”„ë¦¬ì…‹ ì‹¤í–‰ ì·¨ì†Œë¨');
                    
                    // ì‹¤í–‰ ID ì œê±°
                    const clientElement = document.querySelector(`[data-client-id="${clientId}"]`);
                    if (clientElement) {
                        const execIdElement = clientElement.querySelector('.execution-id');
                        if (execIdElement) {
                            execIdElement.remove();
                        }
                    }
                });
                
                executions.set(execution.id, execution);
                updateExecutionInHistory(execution);
            });
        }

        // ==================== ì‹¤í–‰ íˆìŠ¤í† ë¦¬ ê´€ë¦¬ ====================
        function addExecutionToHistory(execution) {
            const executionMonitor = document.getElementById('executionMonitor');
            const executionList = document.getElementById('executionList');
            
            executionMonitor.style.display = 'block';
            
            const executionElement = document.createElement('div');
            executionElement.className = 'execution-item';
            executionElement.id = `execution-${execution.id}`;
            executionElement.innerHTML = createExecutionHTML(execution);
            
            executionList.insertBefore(executionElement, executionList.firstChild);
            
            // ìµœëŒ€ 10ê°œë§Œ ìœ ì§€
            const executionItems = executionList.querySelectorAll('.execution-item');
            if (executionItems.length > 10) {
                executionItems[executionItems.length - 1].remove();
            }
        }

        function updateExecutionInHistory(execution) {
            const executionElement = document.getElementById(`execution-${execution.id}`);
            if (executionElement) {
                executionElement.innerHTML = createExecutionHTML(execution);
            }
        }

        function createExecutionHTML(execution) {
            const duration = execution.completed_at ? 
                Math.round((execution.completed_at - execution.started_at) / 1000) : 
                Math.round((new Date() - execution.started_at) / 1000);
            
            const successCount = Object.values(execution.results).filter(r => r === 'success').length;
            const failedCount = Object.values(execution.results).filter(r => r === 'failed').length;
            const runningCount = Object.values(execution.results).filter(r => r === 'running').length;
            
            const progress = execution.status === 'running' ? 
                Math.min(95, (duration / 30) * 100) : 100;
            
            return `
                <div class="execution-header">
                    <div>
                        <strong>${execution.preset_name}</strong>
                        <div class="execution-details">
                            ID: ${execution.id} | ì‹œì‘: ${execution.started_at.toLocaleTimeString('ko-KR')}
                            ${execution.completed_at ? ` | ì™„ë£Œ: ${execution.completed_at.toLocaleTimeString('ko-KR')}` : ''}
                            | ì†Œìš”ì‹œê°„: ${duration}ì´ˆ
                        </div>
                    </div>
                    <span class="execution-status ${execution.status}">${getStatusText(execution.status)}</span>
                </div>
                <div class="execution-targets">
                    ${execution.target_clients.map(clientId => {
                        const client = clients.get(clientId);
                        const result = execution.results[clientId] || 'pending';
                        return `<span class="target-client ${result}">${client ? client.name : 'Unknown'}</span>`;
                    }).join('')}
                </div>
                <div class="execution-details">
                    ì„±ê³µ: ${successCount}ê°œ | ì‹¤íŒ¨: ${failedCount}ê°œ | ì‹¤í–‰ì¤‘: ${runningCount}ê°œ
                </div>
                ${execution.status === 'running' ? `
                    <div class="execution-progress">
                        <div class="execution-progress-bar" style="width: ${progress}%"></div>
                    </div>
                ` : ''}
            `;
        }

        // ==================== ì¼ê´„ ì œì–´ ê¸°ëŠ¥ ====================
        function toggleSelectAllPresets() {
            const selectAll = document.getElementById('selectAllPresets');
            const checkboxes = document.querySelectorAll('.preset-checkbox');
            
            checkboxes.forEach(checkbox => {
                checkbox.checked = selectAll.checked;
            });
            
            updateSelectedPresetCount();
        }

        function toggleSelectAllGroups() {
            const selectAll = document.getElementById('selectAllGroups');
            const checkboxes = document.querySelectorAll('.group-checkbox');
            
            checkboxes.forEach(checkbox => {
                checkbox.checked = selectAll.checked;
            });
            
            updateSelectedGroupCount();
        }

        function updateSelectedPresetCount() {
            const checkedBoxes = document.querySelectorAll('.preset-checkbox:checked');
            document.getElementById('selectedPresetCount').textContent = checkedBoxes.length;
            selectedPresets = new Set(Array.from(checkedBoxes).map(cb => cb.dataset.presetId));
        }

        function updateSelectedGroupCount() {
            const checkedBoxes = document.querySelectorAll('.group-checkbox:checked');
            document.getElementById('selectedGroupCount').textContent = checkedBoxes.length;
            selectedGroups = new Set(Array.from(checkedBoxes).map(cb => cb.dataset.groupId));
        }

        function bulkPresetAction(action) {
            if (selectedPresets.size === 0) {
                showToast('ì„ íƒëœ í”„ë¦¬ì…‹ì´ ì—†ìŠµë‹ˆë‹¤.', 'error');
                return;
            }
            
            const actionNames = {
                'execute': 'ì‹¤í–‰',
                'stop': 'ì •ì§€', 
                'delete': 'ì‚­ì œ'
            };
            
            const actionName = actionNames[action];
            const presetCount = selectedPresets.size;
            
            if (action === 'delete') {
                if (confirm(`ì„ íƒëœ ${presetCount}ê°œ í”„ë¦¬ì…‹ì„ ëª¨ë‘ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì‹¤í–‰ ì¤‘ì¸ í”„ë¦¬ì…‹ì€ ìë™ìœ¼ë¡œ ì¤‘ì§€ë©ë‹ˆë‹¤.`)) {
                    selectedPresets.forEach(presetId => {
                        deletePreset(presetId);
                    });
                    
                    selectedPresets.clear();
                    document.getElementById('selectAllPresets').checked = false;
                    updateSelectedPresetCount();
                }
            } else if (action === 'execute') {
                if (confirm(`ì„ íƒëœ ${presetCount}ê°œ í”„ë¦¬ì…‹ì„ ëª¨ë‘ ì‹¤í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                    let executed = 0;
                    selectedPresets.forEach(presetId => {
                        const preset = presets.get(presetId);
                        if (preset && !preset.is_active) {
                            executePreset(presetId);
                            executed++;
                        }
                    });
                    showToast(`${executed}ê°œ í”„ë¦¬ì…‹ì´ ì‹¤í–‰ë˜ì—ˆìŠµë‹ˆë‹¤.`, 'success');
                }
            } else if (action === 'stop') {
                if (confirm(`ì„ íƒëœ ${presetCount}ê°œ í”„ë¦¬ì…‹ì„ ëª¨ë‘ ì •ì§€í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                    let stopped = 0;
                    selectedPresets.forEach(presetId => {
                        const preset = presets.get(presetId);
                        if (preset && preset.is_active) {
                            stopActiveExecutions(presetId);
                            stopped++;
                        }
                    });
                    showToast(`${stopped}ê°œ í”„ë¦¬ì…‹ì´ ì •ì§€ë˜ì—ˆìŠµë‹ˆë‹¤.`, 'success');
                }
            }
        }

        function bulkGroupAction(action) {
            if (selectedGroups.size === 0) {
                showToast('ì„ íƒëœ ê·¸ë£¹ì´ ì—†ìŠµë‹ˆë‹¤.', 'error');
                return;
            }
            
            const actionNames = {
                'on': 'ì¼œê¸°',
                'reboot': 'ì¬ë¶€íŒ…',
                'off': 'ë„ê¸°'
            };
            
            const actionName = actionNames[action];
            const groupCount = selectedGroups.size;
            
            if (confirm(`ì„ íƒëœ ${groupCount}ê°œ ê·¸ë£¹ì˜ ëª¨ë“  ë””ìŠ¤í”Œë ˆì´ ì„œë²„ë¥¼ ${actionName} í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                let totalClients = 0;
                selectedGroups.forEach(groupId => {
                    const group = groups.get(groupId);
                    if (group) {
                        totalClients += group.client_ids.length;
                        group.client_ids.forEach(clientId => {
                            addClientHistory(clientId, `ì „ì› ${actionName} ëª…ë ¹ ìˆ˜ì‹ `);
                        });
                    }
                });
                
                showToast(`${groupCount}ê°œ ê·¸ë£¹ (${totalClients}ëŒ€ í´ë¼ì´ì–¸íŠ¸)ì— ì „ì› ${actionName} ëª…ë ¹ì„ ì „ì†¡í–ˆìŠµë‹ˆë‹¤. (v2.1ì—ì„œ í™œì„±í™”)`, 'info');
            }
        }

        // ==================== í† ìŠ¤íŠ¸ ë° ëª¨ë‹¬ ê´€ë¦¬ ====================
        function showToast(message, type = 'info') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = 'toast';
            if (type) toast.classList.add(type);
            toast.style.display = 'block';
            
            setTimeout(() => {
                toast.style.display = 'none';
            }, 4000);
        }

        // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                if (event.target.id === 'clientModal') {
                    closeModal();
                } else if (event.target.id === 'presetModal') {
                    closePresetModal();
                } else if (event.target.id === 'groupModal') {
                    closeGroupModal();
                } else if (event.target.id === 'addClientModal') {
                    closeAddClientModal();
                }
            }
        };

        // ==================== Socket.io ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ (ì‹¤ì œ êµ¬í˜„ìš©) ====================
        /*
        socket.on('connect', () => {
            isSocketConnected = true;
            updateSocketStatus();
            showToast('ì„œë²„ì— ì—°ê²°ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
        });

        socket.on('disconnect', () => {
            isSocketConnected = false;
            updateSocketStatus();
            showToast('ì„œë²„ ì—°ê²°ì´ ëŠì–´ì¡ŒìŠµë‹ˆë‹¤.', 'error');
        });

        socket.on('client_registered', (data) => {
            const client = {
                id: data.id,
                name: data.name,
                ip_address: data.ip_address,
                port: data.port,
                status: 'online',
                created_at: new Date(),
                last_seen: new Date()
            };
            
            clients.set(data.id, client);
            addClientToDOM(client);
            addClientHistory(data.id, 'Python í´ë¼ì´ì–¸íŠ¸ì—ì„œ ìë™ ë“±ë¡ë¨');
            updateGroupClientList();
            updateAllStats();
            
            showToast(`ìƒˆ í´ë¼ì´ì–¸íŠ¸ "${data.name}"ì´(ê°€) ì—°ê²°ë˜ì—ˆìŠµë‹ˆë‹¤.`, 'success');
        });

        socket.on('client_status_changed', (data) => {
            updateClientStatus(data.client_id, data.status);
            addClientHistory(data.client_id, `ìƒíƒœ ë³€ê²½: ${data.status}`);
        });

        socket.on('client_metrics_update', (data) => {
            updateClientMetrics(data.client_id);
        });

        socket.on('preset_execution_started', (data) => {
            const execution = {
                id: data.execution_id,
                preset_id: data.preset_id,
                preset_name: data.preset_name,
                target_clients: data.target_clients,
                status: 'running',
                started_at: new Date(data.started_at),
                results: data.results
            };
            
            executions.set(data.execution_id, execution);
            addExecutionToHistory(execution);
        });

        socket.on('preset_execution_updated', (data) => {
            const execution = executions.get(data.execution_id);
            if (execution) {
                execution.status = data.status;
                execution.results = data.results;
                if (data.completed_at) {
                    execution.completed_at = new Date(data.completed_at);
                }
                
                executions.set(data.execution_id, execution);
                updateExecutionInHistory(execution);
            }
        });

        socket.on('client_disconnected', (data) => {
            updateClientStatus(data.client_id, 'offline');
            addClientHistory(data.client_id, 'ì—°ê²° ëŠê¹€');
        });

        socket.on('broadcast_notification', (data) => {
            showToast(data.message, data.type);
        });

        socket.on('broadcast_error', (data) => {
            showToast(`ì‹œìŠ¤í…œ ì˜¤ë¥˜: ${data.message}`, 'error');
        });
        */

        // ==================== ë°ëª¨ ë°ì´í„° ìƒì„± (ê°œë°œìš©) ====================
        function createDemoData() {
            // ë°ëª¨ í´ë¼ì´ì–¸íŠ¸ ìƒì„±
            const demoClients = [
                { name: 'Display_01', ip: '192.168.1.101', status: 'online' },
                { name: 'Display_02', ip: '192.168.1.102', status: 'running' },
                { name: 'Display_03', ip: '192.168.1.103', status: 'offline' },
                { name: 'Display_04', ip: '192.168.1.104', status: 'online' }
            ];
            
            demoClients.forEach((clientData, index) => {
                const clientId = `demo_client_${index + 1}`;
                const client = {
                    id: clientId,
                    name: clientData.name,
                    ip_address: clientData.ip,
                    port: 8081,
                    description: `ë°ëª¨ í´ë¼ì´ì–¸íŠ¸ ${index + 1}`,
                    status: clientData.status,
                    created_at: new Date(Date.now() - (index * 86400000)), // í•˜ë£¨ì”© ì°¨ì´
                    last_seen: clientData.status !== 'offline' ? new Date() : null
                };
                
                clients.set(clientId, client);
                addClientToDOM(client);
                addClientHistory(clientId, 'ë°ëª¨ ë°ì´í„°ë¡œ ìƒì„±ë¨');
            });
            
            // ë°ëª¨ ê·¸ë£¹ ìƒì„±
            setTimeout(() => {
                const groupId = 'demo_group_1';
                const group = {
                    id: groupId,
                    name: 'ë©”ì¸ ë””ìŠ¤í”Œë ˆì´ ì›”',
                    description: 'ì¤‘ì•™ ë©”ì¸ ë””ìŠ¤í”Œë ˆì´ êµ¬ì—­',
                    client_ids: ['demo_client_1', 'demo_client_2', 'demo_client_4'],
                    created_at: new Date()
                };
                
                groups.set(groupId, group);
                addGroupToDOM(group);
                updateGroupClientList();
                updatePresetGroupList();
            }, 500);
            
            // ë°ëª¨ í”„ë¦¬ì…‹ ìƒì„±
            setTimeout(() => {
                const presetId = 'demo_preset_1';
                const preset = {
                    id: presetId,
                    name: 'ë©”ì¸ ì½˜í…ì¸  ì¬ìƒ',
                    description: '4K ë©”ì¸ ì½˜í…ì¸  ìŠ¤íŠ¸ë¦¬ë°',
                    command: 'D:\\UnrealProjects\\MainContent\\Windows\\MainContent.exe None -messaging -dc_cluster -nosplash -dc_cfg="C:\\nDisplay\\MainWall.ndisplay" -dc_node=Node_0 -fullscreen',
                    group_ids: ['demo_group_1'],
                    created_at: new Date(),
                    is_active: false
                };
                
                presets.set(presetId, preset);
                addPresetToDOM(preset);
            }, 1000);
            
            updateAllStats();
            showToast('ë°ëª¨ ë°ì´í„°ê°€ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤. ì‹¤ì œ í™˜ê²½ì—ì„œëŠ” ì„œë²„ì™€ ì—°ë™ë©ë‹ˆë‹¤.', 'info');
        }

        // ê°œë°œ ëª¨ë“œì—ì„œ ë°ëª¨ ë°ì´í„° ìƒì„±
        setTimeout(() => {
            createDemoData();
        }, 3000);
    </script>
</body>
</html>
            