# Switchboard Plus v2.5 - ê³ ê¸‰ ì „ì†¡ ê¸°ëŠ¥

## ğŸ“‹ 1. ê°œìš”

**ë²„ì „**: v2.5  
**ëª©ì **: ëŒ€ìš©ëŸ‰ íŒŒì¼ ì „ì†¡, ë³‘ë ¬ ì²˜ë¦¬, ì¤‘ë³µ ì œê±° ë“± ê³ ê¸‰ ì „ì†¡ ê¸°ëŠ¥ êµ¬í˜„  
**ì „ì œ ì¡°ê±´**: v2.4 ì™„ì„± (ê¸°ë³¸ íŒŒì¼ ì „ì†¡ ì‹œìŠ¤í…œ)  
**ê°œë°œ ê¸°ê°„**: 1ì£¼  

> ğŸ¯ **í•µì‹¬ ëª©í‘œ**: ëŒ€ìš©ëŸ‰ íŒŒì¼ íš¨ìœ¨ì  ì „ì†¡ + ë„¤íŠ¸ì›Œí¬ ìµœì í™” + v2.6 ë™ê¸°í™” ì‹œìŠ¤í…œ ê¸°ë°˜ ë§ˆë ¨

---

## ğŸ¯ 2. í•µì‹¬ ê¸°ëŠ¥

### 2.1 ì²­í¬ ê¸°ë°˜ ëŒ€ìš©ëŸ‰ íŒŒì¼ ì „ì†¡
```
ğŸ“¦ ì²­í¬ ì „ì†¡ ì‹œìŠ¤í…œ
â”œâ”€â”€ 1MB ë‹¨ìœ„ ì²­í¬ ë¶„í• 
â”œâ”€â”€ ë³‘ë ¬ ì²­í¬ ì—…ë¡œë“œ
â”œâ”€â”€ ì²­í¬ ì¬ì‹œë„ ë©”ì»¤ë‹ˆì¦˜
â””â”€â”€ ì²­í¬ ë¬´ê²°ì„± ê²€ì¦

ğŸ”„ ì „ì†¡ ìµœì í™”
â”œâ”€â”€ ëŒ€ì—­í­ ì œí•œ ë° ê´€ë¦¬
â”œâ”€â”€ ë™ì‹œ ì „ì†¡ ìˆ˜ ì œí•œ
â”œâ”€â”€ ì „ì†¡ ìš°ì„ ìˆœìœ„ ì„¤ì •
â””â”€â”€ ë„¤íŠ¸ì›Œí¬ ìƒíƒœ ëª¨ë‹ˆí„°ë§
```

### 2.2 íŒŒì¼ ì¤‘ë³µ ì œê±° (Deduplication)
```
ğŸ” ì¤‘ë³µ ê°ì§€
â”œâ”€â”€ SHA-256 í•´ì‹œ ê¸°ë°˜ ê²€ì¦
â”œâ”€â”€ íŒŒì¼ í¬ê¸° + í•´ì‹œ ì¡°í•© ê²€ì¦
â”œâ”€â”€ ë¶€ë¶„ íŒŒì¼ ì¤‘ë³µ ê°ì§€
â””â”€â”€ í´ë¼ì´ì–¸íŠ¸ë³„ ì¤‘ë³µ í™•ì¸

ğŸ’¾ ì €ì¥ ê³µê°„ ìµœì í™”
â”œâ”€â”€ ì¤‘ë³µ íŒŒì¼ ì°¸ì¡° ì‹œìŠ¤í…œ
â”œâ”€â”€ í•˜ë“œë§í¬ ê¸°ë°˜ ê³µê°„ ì ˆì•½
â”œâ”€â”€ ì¤‘ë³µ ì œê±° í†µê³„
â””â”€â”€ ì •ë¦¬ ì‘ì—… ìŠ¤ì¼€ì¤„ë§
```

### 2.3 ì‹¤ì‹œê°„ ì§„í–‰ë¥  ëª¨ë‹ˆí„°ë§
```
ğŸ“Š ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
â”œâ”€â”€ WebSocket ê¸°ë°˜ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
â”œâ”€â”€ ì „ì†¡ ì†ë„ ì¸¡ì •
â”œâ”€â”€ ETA (ì˜ˆìƒ ì™„ë£Œ ì‹œê°„) ê³„ì‚°
â””â”€â”€ ë„¤íŠ¸ì›Œí¬ ìƒíƒœ í‘œì‹œ

ğŸ“ˆ ìƒì„¸ í†µê³„
â”œâ”€â”€ í´ë¼ì´ì–¸íŠ¸ë³„ ì „ì†¡ ìƒíƒœ
â”œâ”€â”€ íŒŒì¼ë³„ ì§„í–‰ë¥ 
â”œâ”€â”€ ì „ì²´ ì „ì†¡ ìš”ì•½
â””â”€â”€ ì„±ëŠ¥ ë©”íŠ¸ë¦­ ìˆ˜ì§‘
```

---

## ğŸ—ï¸ 3. ê¸°ìˆ  ì•„í‚¤í…ì²˜

### 3.1 ì²­í¬ ì „ì†¡ í”„ë¡œí† ì½œ

```javascript
// ì²­í¬ ì—…ë¡œë“œ (ëŒ€ìš©ëŸ‰ íŒŒì¼)
POST /api/files/upload/chunk
Body: {
  fileId: "uuid",
  chunkIndex: 0,
  totalChunks: 100,
  chunkData: "base64_chunk_data",
  chunkHash: "sha256_hash"
}

// ì²­í¬ ìƒíƒœ í™•ì¸
GET /api/files/{fileId}/chunks/status

// ì²­í¬ ì¬ì „ì†¡
POST /api/files/{fileId}/chunks/{chunkIndex}/retry
```

### 3.2 ì‹¤ì‹œê°„ ì§„í–‰ë¥  (WebSocket)

```javascript
// WebSocket ë©”ì‹œì§€ í˜•ì‹
{
  "type": "file_transfer_progress", 
  "fileId": "uuid",
  "progress": 65.5,
  "speed": "2.3 MB/s",
  "eta": "00:02:15",
  "transferredBytes": 134217728,
  "totalBytes": 209715200,
  "status": "uploading"
}

// ì „ì†¡ ì™„ë£Œ ì•Œë¦¼
{
  "type": "file_transfer_complete",
  "fileId": "uuid",
  "duration": 125.5,
  "averageSpeed": "1.67 MB/s",
  "status": "success"
}
```

### 3.3 ì „ì†¡ ìµœì í™” ê´€ë¦¬ì

```javascript
// ë³‘ë ¬ ì „ì†¡ ê´€ë¦¬
class AdvancedTransferManager {
  constructor() {
    this.maxConcurrentTransfers = 3;  // ë™ì‹œ ì „ì†¡ ìˆ˜ ì œí•œ
    this.chunkSize = 1024 * 1024;     // 1MB ì²­í¬
    this.retryAttempts = 3;           // ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„
    this.maxBandwidth = 100 * 1024 * 1024; // 100MB/s
  }
  
  async transferFile(file, targets) {
    // 1. íŒŒì¼ í•´ì‹œ ê³„ì‚° (ì¤‘ë³µ ì „ì†¡ ë°©ì§€)
    const fileHash = await this.calculateHash(file);
    
    // 2. ëŒ€ìƒ í´ë¼ì´ì–¸íŠ¸ì—ì„œ íŒŒì¼ ì¡´ì¬ ì—¬ë¶€ í™•ì¸
    const missingTargets = await this.checkFileExists(fileHash, targets);
    
    // 3. í•„ìš”í•œ í´ë¼ì´ì–¸íŠ¸ì—ë§Œ ì „ì†¡
    return await this.parallelTransfer(file, missingTargets);
  }
  
  async parallelTransfer(file, targets) {
    const chunks = await this.splitFileIntoChunks(file);
    const transferPromises = targets.map(target => 
      this.transferToClient(chunks, target)
    );
    
    return await Promise.all(transferPromises);
  }
}

// ì¤‘ë³µ ì œê±° ê´€ë¦¬ì
class DeduplicationManager {
  async checkDuplicates(fileHash, targets) {
    // ì´ë¯¸ ê°™ì€ íŒŒì¼ì„ ê°€ì§„ í´ë¼ì´ì–¸íŠ¸ ì°¾ê¸°
    const existingClients = await this.findClientsWithFile(fileHash);
    
    // ì „ì†¡ ë¶ˆí•„ìš”í•œ ëŒ€ìƒ ì œê±°
    const uniqueTargets = targets.filter(t => !existingClients.includes(t));
    
    return {
      targets: uniqueTargets,
      skipped: targets.length - uniqueTargets.length,
      savedBytes: this.calculateSavedBytes(fileHash, existingClients)
    };
  }
}

// ëŒ€ì—­í­ ê´€ë¦¬ì
class BandwidthManager {
  constructor() {
    this.maxBandwidth = 100 * 1024 * 1024; // 100MB/s
    this.activeTransfers = new Map();
  }
  
  async throttleTransfer(transferId, data) {
    const currentUsage = this.getCurrentBandwidthUsage();
    
    if (currentUsage > this.maxBandwidth * 0.8) {
      // 80% ì´ìƒ ì‚¬ìš© ì‹œ ëŒ€ê¸°
      await this.waitForBandwidth();
    }
    
    return data;
  }
}
```

### 3.4 ë°ì´í„°ë² ì´ìŠ¤ í™•ì¥

```sql
-- íŒŒì¼ í•´ì‹œ ì •ë³´ ì¶”ê°€
ALTER TABLE files ADD COLUMN file_hash VARCHAR(64);
ALTER TABLE files ADD COLUMN chunk_count INTEGER DEFAULT 1;

-- ì²­í¬ ì •ë³´ í…Œì´ë¸”
CREATE TABLE file_chunks (
    id INTEGER PRIMARY KEY,
    file_id INTEGER,
    chunk_index INTEGER,
    chunk_hash VARCHAR(64),
    chunk_size INTEGER,
    status VARCHAR(20),           -- 'pending', 'uploaded', 'verified', 'failed'
    retry_count INTEGER DEFAULT 0,
    created_at DATETIME,
    uploaded_at DATETIME,
    FOREIGN KEY (file_id) REFERENCES files(id)
);

-- ì „ì†¡ ì„±ëŠ¥ ë©”íŠ¸ë¦­
CREATE TABLE transfer_metrics (
    id INTEGER PRIMARY KEY,
    file_id INTEGER,
    client_id INTEGER,
    start_time DATETIME,
    end_time DATETIME,
    duration_seconds DECIMAL(10,2),
    total_bytes BIGINT,
    average_speed DECIMAL(10,2),  -- bytes per second
    peak_speed DECIMAL(10,2),
    retry_count INTEGER,
    status VARCHAR(20),
    FOREIGN KEY (file_id) REFERENCES files(id),
    FOREIGN KEY (client_id) REFERENCES clients(id)
);
```

---

## ğŸ¨ 4. UI/UX ì„¤ê³„

### 4.1 ê³ ê¸‰ ì „ì†¡ ìƒíƒœ ëª¨ë‹ˆí„°ë§

```jsx
// AdvancedTransferStatusPanel.jsx
function AdvancedTransferStatusPanel() {
  const [activeTransfers, setActiveTransfers] = useState([]);
  const [transferMetrics, setTransferMetrics] = useState({});
  
  return (
    <Paper sx={{ p: 2 }}>
      <Typography variant="h6" gutterBottom>
        ê³ ê¸‰ ì „ì†¡ ìƒíƒœ
      </Typography>
      
      {/* ë„¤íŠ¸ì›Œí¬ ìƒíƒœ */}
      <NetworkStatusPanel />
      
      {/* ì§„í–‰ ì¤‘ì¸ ì „ì†¡ */}
      {activeTransfers.map(transfer => (
        <AdvancedTransferItem 
          key={transfer.id}
          transfer={transfer}
          metrics={transferMetrics[transfer.id]}
        />
      ))}
      
      {/* ì „ì†¡ í†µê³„ */}
      <TransferStatisticsPanel />
    </Paper>
  );
}

// AdvancedTransferItem.jsx
function AdvancedTransferItem({ transfer, metrics }) {
  return (
    <Box sx={{ mb: 2, p: 2, border: '1px solid #eee', borderRadius: 1 }}>
      <Box display="flex" justifyContent="space-between" alignItems="center">
        <Box>
          <Typography variant="subtitle2">{transfer.filename}</Typography>
          <Typography variant="caption" color="text.secondary">
            {transfer.targets.join(', ')} ({transfer.fileSize})
          </Typography>
        </Box>
        
        <Box display="flex" alignItems="center" gap={1}>
          <CircularProgress 
            variant="determinate" 
            value={transfer.progress} 
            size={24}
          />
          <Typography variant="caption">
            {transfer.progress.toFixed(1)}%
          </Typography>
        </Box>
      </Box>
      
      {/* ìƒì„¸ ì§„í–‰ë¥  */}
      <Box mt={1}>
        <LinearProgress 
          variant="determinate" 
          value={transfer.progress} 
        />
        <Box display="flex" justifyContent="space-between" mt={0.5}>
          <Typography variant="caption" color="text.secondary">
            ì†ë„: {transfer.speed}
          </Typography>
          <Typography variant="caption" color="text.secondary">
            ETA: {transfer.eta}
          </Typography>
          <Typography variant="caption" color="text.secondary">
            ì „ì†¡ë¨: {transfer.transferredBytes} / {transfer.totalBytes}
          </Typography>
        </Box>
      </Box>
      
      {/* ì²­í¬ ìƒíƒœ */}
      {transfer.chunks && (
        <Box mt={1}>
          <Typography variant="caption" color="text.secondary">
            ì²­í¬: {transfer.chunks.uploaded}/{transfer.chunks.total}
          </Typography>
          <Box display="flex" gap={0.5} mt={0.5}>
            {transfer.chunks.status.map((status, index) => (
              <Box
                key={index}
                sx={{
                  width: 8,
                  height: 8,
                  borderRadius: '50%',
                  bgcolor: status === 'uploaded' ? 'success.main' : 
                          status === 'uploading' ? 'warning.main' : 'error.main'
                }}
              />
            ))}
          </Box>
        </Box>
      )}
    </Box>
  );
}
```

### 4.2 ì¤‘ë³µ ì œê±° í†µê³„ íŒ¨ë„

```jsx
// DeduplicationStatsPanel.jsx
function DeduplicationStatsPanel() {
  const [stats, setStats] = useState({
    totalFiles: 0,
    duplicateFiles: 0,
    savedSpace: 0,
    savedBandwidth: 0
  });
  
  return (
    <Paper sx={{ p: 2 }}>
      <Typography variant="h6" gutterBottom>
        ì¤‘ë³µ ì œê±° í†µê³„
      </Typography>
      
      <Grid container spacing={2}>
        <Grid item xs={6}>
          <Box textAlign="center">
            <Typography variant="h4" color="primary">
              {stats.duplicateFiles}
            </Typography>
            <Typography variant="caption">
              ì¤‘ë³µ íŒŒì¼ ê°ì§€
            </Typography>
          </Box>
        </Grid>
        
        <Grid item xs={6}>
          <Box textAlign="center">
            <Typography variant="h4" color="success.main">
              {formatBytes(stats.savedSpace)}
            </Typography>
            <Typography variant="caption">
              ì ˆì•½ëœ ì €ì¥ ê³µê°„
            </Typography>
          </Box>
        </Grid>
        
        <Grid item xs={12}>
          <Box textAlign="center">
            <Typography variant="h6" color="info.main">
              {formatBytes(stats.savedBandwidth)}
            </Typography>
            <Typography variant="caption">
              ì ˆì•½ëœ ëŒ€ì—­í­
            </Typography>
          </Box>
        </Grid>
      </Grid>
    </Paper>
  );
}
```

---

## ğŸ”§ 5. API ì„¤ê³„

### 5.1 ê³ ê¸‰ ì „ì†¡ API

```javascript
// ì²­í¬ ì—…ë¡œë“œ
POST /api/files/upload/chunk
Body: {
  fileId: "uuid",
  chunkIndex: 0,
  totalChunks: 100,
  chunkData: "base64_data",
  chunkHash: "sha256_hash"
}

// ì²­í¬ ìƒíƒœ í™•ì¸
GET /api/files/{fileId}/chunks/status

// ì²­í¬ ì¬ì „ì†¡
POST /api/files/{fileId}/chunks/{chunkIndex}/retry

// ì „ì†¡ ìµœì í™” ì„¤ì •
PUT /api/transfer/settings
Body: {
  maxConcurrentTransfers: 3,
  chunkSize: 1048576,
  maxBandwidth: 104857600,
  retryAttempts: 3
}

// ì¤‘ë³µ ì œê±° í†µê³„
GET /api/deduplication/stats

// ì „ì†¡ ì„±ëŠ¥ ë©”íŠ¸ë¦­
GET /api/transfer/metrics?fileId={fileId}&clientId={clientId}
```

---

## ğŸ“Š 6. ì„±ëŠ¥ ìµœì í™”

### 6.1 ì „ì†¡ ìµœì í™”

```javascript
// ì¤‘ë³µ ì œê±° (Deduplication)
class DeduplicationManager {
  async checkDuplicates(fileHash, targets) {
    // ì´ë¯¸ ê°™ì€ íŒŒì¼ì„ ê°€ì§„ í´ë¼ì´ì–¸íŠ¸ ì°¾ê¸°
    const existingClients = await this.findClientsWithFile(fileHash);
    
    // ì „ì†¡ ë¶ˆí•„ìš”í•œ ëŒ€ìƒ ì œê±°
    const uniqueTargets = targets.filter(t => !existingClients.includes(t));
    
    return uniqueTargets;
  }
}

// ëŒ€ì—­í­ ì œí•œ
class BandwidthManager {
  constructor() {
    this.maxBandwidth = 100 * 1024 * 1024; // 100MB/s
    this.activeTransfers = new Map();
  }
  
  async throttleTransfer(transferId, data) {
    const currentUsage = this.getCurrentBandwidthUsage();
    
    if (currentUsage > this.maxBandwidth * 0.8) {
      // 80% ì´ìƒ ì‚¬ìš© ì‹œ ëŒ€ê¸°
      await this.waitForBandwidth();
    }
    
    return data;
  }
}
```

### 6.2 ìºì‹± ì „ëµ

```javascript
// íŒŒì¼ ë©”íƒ€ë°ì´í„° ìºì‹±
class FileCache {
  constructor() {
    this.cache = new Map();
    this.cacheTimeout = 5 * 60 * 1000; // 5ë¶„
  }
  
  async getFileInfo(clientId, filepath) {
    const cacheKey = `${clientId}:${filepath}`;
    const cached = this.cache.get(cacheKey);
    
    if (cached && Date.now() - cached.timestamp < this.cacheTimeout) {
      return cached.data;
    }
    
    const fileInfo = await this.fetchFileInfo(clientId, filepath);
    this.cache.set(cacheKey, {
      data: fileInfo,
      timestamp: Date.now()
    });
    
    return fileInfo;
  }
}
```

---

## ğŸ“… 7. ê°œë°œ ì¼ì •

### Day 1-2: ì²­í¬ ì „ì†¡ ì‹œìŠ¤í…œ
- [ ] ì²­í¬ ë¶„í•  ë° ì—…ë¡œë“œ ë¡œì§ êµ¬í˜„
- [ ] ì²­í¬ ì¬ì‹œë„ ë©”ì»¤ë‹ˆì¦˜ ê°œë°œ
- [ ] ì²­í¬ ë¬´ê²°ì„± ê²€ì¦ ì‹œìŠ¤í…œ

### Day 3-4: ì¤‘ë³µ ì œê±° ë° ìµœì í™”
- [ ] íŒŒì¼ í•´ì‹œ ê¸°ë°˜ ì¤‘ë³µ ê°ì§€
- [ ] ëŒ€ì—­í­ ê´€ë¦¬ ì‹œìŠ¤í…œ
- [ ] ë³‘ë ¬ ì „ì†¡ ìµœì í™”

### Day 5: ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
- [ ] WebSocket ê¸°ë°˜ ì‹¤ì‹œê°„ ì§„í–‰ë¥ 
- [ ] ì „ì†¡ ì„±ëŠ¥ ë©”íŠ¸ë¦­ ìˆ˜ì§‘
- [ ] ê³ ê¸‰ UI ì»´í¬ë„ŒíŠ¸ êµ¬í˜„

---

## ğŸ¯ 8. ì„±ê³µ ê¸°ì¤€

### 8.1 ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­
- [ ] 500MB íŒŒì¼ì„ 10ëŒ€ í´ë¼ì´ì–¸íŠ¸ì— 5ë¶„ ë‚´ ì „ì†¡
- [ ] ì „ì†¡ ì¤‘ 99% ì‹ ë¢°ì„± (ì¬ì‹œë„ í¬í•¨)
- [ ] ì‹¤ì‹œê°„ ì§„í–‰ë¥  í‘œì‹œ (1ì´ˆ ê°„ê²© ì—…ë°ì´íŠ¸)
- [ ] ë™ì‹œ ì „ì†¡ ìµœëŒ€ 20ê°œ ì²˜ë¦¬

### 8.2 ì„±ëŠ¥ ìš”êµ¬ì‚¬í•­  
- [ ] ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­í­ íš¨ìœ¨ì„± 80% ì´ìƒ
- [ ] íŒŒì¼ ì¤‘ë³µ ì œê±°ë¡œ ì „ì†¡ëŸ‰ 50% ì ˆì•½
- [ ] UI ì‘ë‹µì„± 3ì´ˆ ì´ë‚´
- [ ] ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì„œë²„ 1GB ì´í•˜

### 8.3 ì‚¬ìš©ì„± ìš”êµ¬ì‚¬í•­
- [ ] ì‹¤ì‹œê°„ ì „ì†¡ ìƒíƒœ ëª¨ë‹ˆí„°ë§
- [ ] ì‹¤íŒ¨ ì‹œ ìë™ ì¬ì‹œë„ ë° ì—ëŸ¬ ì•Œë¦¼
- [ ] ì¤‘ë³µ ì œê±° í†µê³„ ì‹œê°í™”

---

## ğŸ”® 9. v2.6 ì—°ê³„ ê³ ë ¤ì‚¬í•­

### 9.1 í™•ì¥ í¬ì¸íŠ¸
- ë™ê¸°í™” í”„ë¡œí•„ ê´€ë¦¬ ì‹œìŠ¤í…œ ì¤€ë¹„
- í´ë” ëª¨ë‹ˆí„°ë§ ì´ë²¤íŠ¸ ì‹œìŠ¤í…œ ì¤€ë¹„
- ì¶©ëŒ í•´ê²° ë¡œì§ êµ¬ì¡° ì¤€ë¹„
- ìŠ¤ì¼€ì¤„ë§ ì‹œìŠ¤í…œ ê¸°ë°˜ ì¤€ë¹„

---

*ì´ ë¬¸ì„œëŠ” v2.5 ê°œë°œ ê³¼ì •ì—ì„œ ì§€ì†ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.* 